import{r as e,j as t,R as s}from"./vendor-react-Gj0PPTzM.js";import{u as a}from"./taskStore-LwOSsDkH.js";import{u as r}from"./categoryStore-DGwHaERV.js";import{X as l,O as i,P as n,C as c,c as o,Q as d,U as x,u,n as m,W as h,Y as g,v as p,_ as j,$ as y,a0 as b}from"./icons-CSMXKUV2.js";import{ar as f}from"./vendor-misc-CPs7ArQ_.js";import"./vendor-state-Jewp0_hO.js";const v=({task:s,isOpen:a,onClose:d,onSubmit:x,isLoading:u=!1})=>{const{categories:m,fetchCategories:h,createCategory:g}=r(),[p,j]=e.useState({title:"",description:"",categoryId:0,estimatedDuration:void 0,priority:"medium",dueDate:void 0}),[y,b]=e.useState({}),[f,v]=e.useState(!1),[N,k]=e.useState(""),[w,C]=e.useState("#3B82F6"),[D,S]=e.useState(!1);e.useEffect(()=>{0===m.length&&h()},[m.length,h]),e.useEffect(()=>{j(s?{title:s.title,description:s.description||"",categoryId:s.categoryId,estimatedDuration:s.estimatedDuration,priority:s.priority,dueDate:s.dueDate?s.dueDate.toISOString().split("T")[0]:void 0}:{title:"",description:"",categoryId:m.length>0?m[0].id:0,estimatedDuration:void 0,priority:"medium",dueDate:void 0}),b({})},[s,m,a]);const T=(e,t)=>{j(s=>({...s,[e]:t})),y[e]&&b(t=>({...t,[e]:""}))};return a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Task":"Create New Task"}),t.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:u,children:t.jsx(l,{size:24})})]}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return p.title.trim()||(e.title="Title is required"),p.categoryId||(e.categoryId="Category is required"),p.estimatedDuration&&p.estimatedDuration<=0&&(e.estimatedDuration="Duration must be greater than 0"),b(e),0===Object.keys(e).length})())try{await x(p),d()}catch(t){}},className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),t.jsx("input",{type:"text",id:"title",value:p.title,onChange:e=>T("title",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white "+(y.title?"border-red-500":"border-gray-300"),placeholder:"Enter task title",disabled:u}),y.title&&t.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(i,{size:16,className:"mr-1"}),y.title]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{id:"description",value:p.description,onChange:e=>T("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",placeholder:"Enter task description (optional)",disabled:u})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("select",{id:"category",value:p.categoryId,onChange:e=>T("categoryId",parseInt(e.target.value)),className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white "+(y.categoryId?"border-red-500":"border-gray-300"),disabled:u,children:[t.jsx("option",{value:0,children:"Select a category"}),m.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsx("button",{type:"button",onClick:()=>v(!f),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors flex items-center",disabled:u,title:"Create new category",children:t.jsx(n,{size:16})})]}),f&&t.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-md border",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Create New Category"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"Category name",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-900 bg-white",disabled:D}),t.jsx("input",{type:"color",value:w,onChange:e=>C(e.target.value),className:"w-10 h-8 border border-gray-300 rounded cursor-pointer",disabled:D,title:"Category color"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"button",onClick:async()=>{if(N.trim()){S(!0);try{const e=await g({name:N.trim(),color:w,description:"",weeklyGoal:0});e&&e.id?(j(t=>({...t,categoryId:e.id})),k(""),C("#3B82F6"),v(!1),await h()):b(e=>({...e,categoryId:"Failed to create category. Please try again."}))}catch(e){b(e=>({...e,categoryId:"Failed to create category. Please check your connection and try again."}))}finally{S(!1)}}},disabled:!N.trim()||D,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Creating...":"Create"}),t.jsx("button",{type:"button",onClick:()=>{v(!1),k(""),C("#3B82F6")},className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300",disabled:D,children:"Cancel"})]})]})]}),y.categoryId&&t.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(i,{size:16,className:"mr-1"}),y.categoryId]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),t.jsxs("select",{id:"priority",value:p.priority,onChange:e=>T("priority",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",disabled:u,children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (min)"}),t.jsxs("div",{className:"relative",children:[t.jsx(c,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"number",id:"duration",value:p.estimatedDuration||"",onChange:e=>T("estimatedDuration",e.target.value?parseInt(e.target.value):void 0),className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white "+(y.estimatedDuration?"border-red-500":"border-gray-300"),placeholder:"30",min:"1",disabled:u})]}),y.estimatedDuration&&t.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(i,{size:16,className:"mr-1"}),y.estimatedDuration]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),t.jsxs("div",{className:"relative",children:[t.jsx(o,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"date",id:"dueDate",value:p.dueDate||"",onChange:e=>T("dueDate",e.target.value||void 0),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",disabled:u})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:u,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?"Saving...":s?"Update Task":"Create Task"})]})]})]})}):null},N=({task:s,onEdit:a,onDelete:l,onComplete:i,onStartSession:n})=>{const{categories:p}=r(),[j,y]=e.useState(!1),b=p.find(e=>e.id===s.categoryId),f=s.dueDate&&s.dueDate<new Date&&"active"===s.status,v=s.dueDate&&s.dueDate.toDateString()===(new Date).toDateString()&&"active"===s.status,N=e=>{if(e<60)return`${e}m`;const t=Math.floor(e/60),s=e%60;return s>0?`${t}h ${s}m`:`${t}h`};return t.jsx("div",{className:`group task-card card-interactive p-6 transition-all duration-300 ${"completed"===s.status?"opacity-70":""} ${f?"border-danger-200 !bg-danger-25":""} ${v&&!f?"border-warning-200 !bg-warning-25":""}`,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("button",{onClick:()=>i(s),className:"mt-1.5 transition-all duration-200 hover:scale-110 "+("completed"===s.status?"text-success-600 hover:text-success-700":"text-neutral-300 hover:text-success-500"),disabled:"archived"===s.status,children:"completed"===s.status?t.jsx(d,{size:22,className:"drop-shadow-sm"}):t.jsx(x,{size:22})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"font-semibold text-neutral-900 text-lg tracking-tight "+("completed"===s.status?"line-through opacity-60":""),children:s.title}),t.jsx("span",{className:`status-indicator priority-${s.priority} text-xs font-semibold`,children:s.priority}),f&&t.jsxs("span",{className:"flex items-center text-danger-600 text-xs font-medium bg-danger-100 px-2 py-1 rounded-lg",children:[t.jsx(u,{size:12,className:"mr-1"}),"Overdue"]}),v&&!f&&t.jsxs("span",{className:"flex items-center text-warning-600 text-xs font-medium bg-warning-100 px-2 py-1 rounded-lg",children:[t.jsx(o,{size:12,className:"mr-1"}),"Due Today"]})]}),s.description&&t.jsx("p",{className:"text-neutral-600 mb-3 line-clamp-2 leading-relaxed",children:s.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-neutral-500",children:[b&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:b.color}}),t.jsx("span",{className:"font-medium",children:b.name})]}),(s.estimatedDuration||s.actualDuration>0)&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(c,{size:14}),t.jsxs("span",{children:[s.actualDuration>0&&t.jsx("span",{className:"text-success-600 font-semibold",children:N(s.actualDuration)}),s.estimatedDuration&&s.actualDuration>0&&t.jsx("span",{className:"text-neutral-400 mx-1",children:"/"}),s.estimatedDuration&&t.jsxs("span",{className:"text-neutral-600",children:[N(s.estimatedDuration)," est."]})]})]}),s.dueDate&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(o,{size:14}),t.jsx("span",{className:f?"text-danger-600 font-semibold":"font-medium",children:(e=>{const t=new Date,s=new Date(t);return s.setDate(s.getDate()+1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===s.toDateString()?"Tomorrow":e.toLocaleDateString()})(s.dueDate)})]}),t.jsx("span",{className:`status-${s.status} text-xs`,children:s.status})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 transition-all duration-300 "+(j?"opacity-100 translate-x-0":"opacity-0 translate-x-2"),children:["active"===s.status&&n&&t.jsx("button",{onClick:()=>n(s),className:"p-2.5 text-success-600 hover:text-success-700 hover:bg-success-50 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95 shadow-soft",title:"Start focus session",children:t.jsx(m,{size:16})}),"archived"!==s.status&&t.jsx("button",{onClick:()=>a(s),className:"p-2.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95 shadow-soft",title:"Edit task",children:t.jsx(h,{size:16})}),t.jsx("button",{onClick:()=>l(s),className:"p-2.5 text-danger-500 hover:text-danger-600 hover:bg-danger-50 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95 shadow-soft",title:"Delete task",children:t.jsx(g,{size:16})})]})]})})},k=s.memo(({tasks:s,onEditTask:a,onDeleteTask:l,onCompleteTask:i,onStartSession:n,groupByCategory:c=!1,showEmptyState:o=!0})=>{const{categories:d}=r(),{activeTasks:x,completedTasks:u,archivedTasks:m}=e.useMemo(()=>({activeTasks:s.filter(e=>"active"===e.status),completedTasks:s.filter(e=>"completed"===e.status),archivedTasks:s.filter(e=>"archived"===e.status)}),[s]),h=e.useCallback(e=>e.reduce((e,t)=>{const s=t.categoryId;return e[s]||(e[s]=[]),e[s].push(t),e},{}),[]);if(0===s.length&&o)return t.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[t.jsx("div",{className:"text-neutral-300 mb-6",children:t.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),t.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-3 tracking-tight",children:"No tasks found"}),t.jsx("p",{className:"text-neutral-600 max-w-sm mx-auto leading-relaxed",children:"Create your first task to get started with organizing and tracking your work."})]});if(!c)return t.jsxs("div",{className:"space-y-8",children:[x.length>0&&t.jsx("div",{className:"space-y-4 animate-slide-up",children:x.map((e,s)=>t.jsx("div",{className:"animate-slide-up",style:{animationDelay:50*s+"ms"},children:t.jsx(N,{task:e,onEdit:a,onDelete:l,onComplete:i,onStartSession:n})},e.id))}),u.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4 pt-8 border-t border-neutral-200",children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-success-500 shadow-soft"}),t.jsx("h3",{className:"text-xl font-semibold text-neutral-700 tracking-tight",children:"Completed Tasks"}),t.jsxs("span",{className:"text-sm text-neutral-500 bg-neutral-100 px-2.5 py-1 rounded-full font-medium",children:[u.length," task",1!==u.length?"s":""]})]}),t.jsx("div",{className:"space-y-4",children:u.map((e,s)=>t.jsx("div",{className:"animate-slide-up",style:{animationDelay:50*s+"ms"},children:t.jsx(N,{task:e,onEdit:a,onDelete:l,onComplete:i,onStartSession:n})},e.id))})]}),m.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4 pt-8 border-t border-neutral-200",children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-neutral-400 shadow-soft"}),t.jsx("h3",{className:"text-xl font-semibold text-neutral-600 tracking-tight",children:"Archived Tasks"}),t.jsxs("span",{className:"text-sm text-neutral-500 bg-neutral-100 px-2.5 py-1 rounded-full font-medium",children:[m.length," task",1!==m.length?"s":""]})]}),t.jsx("div",{className:"space-y-4 opacity-60",children:m.map((e,s)=>t.jsx("div",{className:"animate-slide-up",style:{animationDelay:50*s+"ms"},children:t.jsx(N,{task:e,onEdit:a,onDelete:l,onComplete:i,onStartSession:n})},e.id))})]})]});const g=e.useCallback((e,s="opacity-100")=>Object.keys(e).map(e=>parseInt(e)).sort((e,t)=>{const s=d.find(t=>t.id===e),a=d.find(e=>e.id===t);return(s?.name||"").localeCompare(a?.name||"")}).map(r=>{const c=d.find(e=>e.id===r),o=e[r];return c&&0!==o.length?t.jsxs("div",{className:`space-y-3 ${s}`,children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:c.color}}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.name}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",o.length," task",1!==o.length?"s":"",")"]})]}),t.jsx("div",{className:"space-y-3 ml-7",children:o.map(e=>t.jsx(N,{task:e,onEdit:a,onDelete:l,onComplete:i,onStartSession:n},e.id))})]},r):null}),[d]);return t.jsxs("div",{className:"space-y-6",children:[x.length>0&&t.jsx("div",{className:"space-y-6",children:g(h(x))}),u.length>0&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 pt-6 border-t border-gray-200",children:[t.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Completed Tasks"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",u.length," task",1!==u.length?"s":"",")"]})]}),g(h(u),"opacity-75")]}),m.length>0&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 pt-6 border-t border-gray-200",children:[t.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-400"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:"Archived Tasks"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",m.length," task",1!==m.length?"s":"",")"]})]}),g(h(m),"opacity-50")]})]})});k.displayName="TaskList";const w=({filters:e,onFiltersChange:s,taskCounts:a})=>{const{categories:i}=r(),n=(t,a)=>{s({...e,[t]:""===a?void 0:a})},c=Object.values(e).some(e=>void 0!==e&&""!==e);return t.jsxs("div",{className:"card p-6 space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(p,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:e.searchQuery||"",onChange:e=>n("searchQuery",e.target.value),className:"input pl-10 text-neutral-900"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(j,{size:16,className:"text-neutral-500"}),t.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Filters:"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"category-filter",className:"text-sm text-neutral-600",children:"Category:"}),t.jsxs("select",{id:"category-filter",value:e.categoryId||"",onChange:e=>n("categoryId",e.target.value?parseInt(e.target.value):void 0),className:"text-sm border border-neutral-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-neutral-200 focus:border-neutral-400 text-neutral-900 bg-white transition-all duration-200",children:[t.jsx("option",{value:"",className:"text-neutral-900",children:"All Categories"}),i.map(e=>t.jsx("option",{value:e.id,className:"text-neutral-900",children:e.name},e.id))]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"status-filter",className:"text-sm text-neutral-600",children:"Status:"}),t.jsxs("select",{id:"status-filter",value:e.status||"",onChange:e=>n("status",e.target.value||void 0),className:"text-sm border border-neutral-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-neutral-200 focus:border-neutral-400 text-neutral-900 bg-white transition-all duration-200",children:[t.jsx("option",{value:"",className:"text-neutral-900",children:"All Status"}),t.jsx("option",{value:"active",className:"text-neutral-900",children:"Active"}),t.jsx("option",{value:"completed",className:"text-neutral-900",children:"Completed"}),t.jsx("option",{value:"archived",className:"text-neutral-900",children:"Archived"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"priority-filter",className:"text-sm text-neutral-600",children:"Priority:"}),t.jsxs("select",{id:"priority-filter",value:e.priority||"",onChange:e=>n("priority",e.target.value||void 0),className:"text-sm border border-neutral-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-neutral-200 focus:border-neutral-400 text-neutral-900 bg-white transition-all duration-200",children:[t.jsx("option",{value:"",className:"text-neutral-900",children:"All Priorities"}),t.jsx("option",{value:"high",className:"text-neutral-900",children:"High"}),t.jsx("option",{value:"medium",className:"text-neutral-900",children:"Medium"}),t.jsx("option",{value:"low",className:"text-neutral-900",children:"Low"})]})]}),c&&t.jsxs("button",{onClick:()=>{s({})},className:"flex items-center space-x-1 text-sm text-danger-600 hover:text-danger-700 transition-colors",children:[t.jsx(l,{size:16}),t.jsx("span",{children:"Clear Filters"})]})]}),a&&t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-neutral-600 pt-4 border-t border-neutral-100",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{className:"font-medium",children:a.total}),t.jsx("span",{children:"Total"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-neutral-400 rounded-full"}),t.jsx("span",{className:"font-medium",children:a.active}),t.jsx("span",{children:"Active"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full"}),t.jsx("span",{className:"font-medium",children:a.completed}),t.jsx("span",{children:"Completed"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-neutral-300 rounded-full"}),t.jsx("span",{className:"font-medium",children:a.archived}),t.jsx("span",{children:"Archived"})]})]})]})},C=({isOpen:e,title:s,message:a,confirmText:r="Confirm",cancelText:i="Cancel",onConfirm:n,onCancel:c,isLoading:o=!1,variant:d="danger"})=>{if(!e)return null;const x=(()=>{switch(d){case"danger":default:return{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"warning":return{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"};case"info":return{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}})();return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(u,{size:24,className:x.icon}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s})]}),t.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:t.jsx(l,{size:24})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-gray-700 mb-6",children:a}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:o,children:i}),t.jsx("button",{onClick:n,className:`px-4 py-2 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${x.button}`,disabled:o,children:o?"Processing...":r})]})]})]})})},D=()=>{const{filteredTasks:s,filters:l,isLoading:i,error:c,fetchTasks:o,createTask:d,updateTask:x,deleteTask:u,completeTask:m,setFilters:h,clearError:g}=a(),{categories:p,fetchCategories:j}=r(),[N,D]=e.useState(!1),[S,T]=e.useState(null),[z,I]=e.useState(null),[F,E]=e.useState(!1);e.useEffect(()=>{o(),0===p.length&&j()},[o,j,p.length]),e.useEffect(()=>{c&&(f.error(c),g())},[c,g]);const L={total:s.length,active:s.filter(e=>"active"===e.status).length,completed:s.filter(e=>"completed"===e.status).length,archived:s.filter(e=>"archived"===e.status).length};return t.jsxs("div",{className:"space-y-8 animate-fade-in",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h1",{className:"text-3xl font-bold text-neutral-900 tracking-tight",children:"Tasks"}),t.jsx("p",{className:"text-neutral-600",children:"Manage your tasks and track your progress"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center bg-neutral-100 rounded-xl p-1 shadow-inner-soft",children:[t.jsx("button",{onClick:()=>E(!1),className:"p-2.5 rounded-lg transition-all duration-200 "+(F?"text-neutral-500 hover:text-neutral-700 hover:bg-neutral-50":"bg-white text-neutral-900 shadow-soft"),title:"List view",children:t.jsx(y,{size:16})}),t.jsx("button",{onClick:()=>E(!0),className:"p-2.5 rounded-lg transition-all duration-200 "+(F?"bg-white text-neutral-900 shadow-soft":"text-neutral-500 hover:text-neutral-700 hover:bg-neutral-50"),title:"Group by category",children:t.jsx(b,{size:16})})]}),t.jsxs("button",{onClick:()=>D(!0),className:"btn-primary btn-md flex items-center space-x-2",children:[t.jsx(n,{size:18}),t.jsx("span",{children:"Add Task"})]})]})]}),t.jsx(w,{filters:l,onFiltersChange:h,taskCounts:L}),t.jsx("div",{className:"card",children:i?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-200 border-t-primary-600"}),t.jsx("span",{className:"text-sm text-neutral-600 font-medium",children:"Loading tasks..."})]})}):t.jsx("div",{className:"p-8",children:t.jsx(k,{tasks:s,onEditTask:T,onDeleteTask:I,onCompleteTask:async e=>{try{"completed"===e.status?(await x(e.id,{status:"active",completedAt:void 0}),f.success("Task reactivated!")):(await m(e.id),f.success("Task completed!"))}catch(t){}},onStartSession:e=>{f.success(`Starting focus session for: ${e.title}`)},groupByCategory:F})})}),t.jsx(v,{task:S||void 0,isOpen:N||null!==S,onClose:()=>{D(!1),T(null)},onSubmit:S?async e=>{if(S)try{await x(S.id,e),f.success("Task updated successfully!"),T(null)}catch(t){}}:async e=>{try{await d(e),f.success("Task created successfully!"),D(!1)}catch(t){}},isLoading:i}),t.jsx(C,{isOpen:null!==z,title:"Delete Task",message:`Are you sure you want to delete "${z?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:async()=>{if(z)try{await u(z.id),f.success("Task deleted successfully!"),I(null)}catch(e){}},onCancel:()=>I(null),isLoading:i,variant:"danger"})]})};export{D as default};
//# sourceMappingURL=Tasks-DF9PgFV-.js.map
