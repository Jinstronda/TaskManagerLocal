import{r as e,R as s,j as t}from"./vendor-react-Gj0PPTzM.js";import{u as a,a as r}from"./mindfulnessStore-BwCctBeq.js";import{u as n}from"./taskStore-LwOSsDkH.js";import{c as i}from"./utils-BeLtu-UY.js";import{aq as l}from"./vendor-misc-CPs7ArQ_.js";import{n as o,r as c,s as d,i as m,t as u,Z as x,p as g,S as h,u as p,a as f,v as y,C as b,P as j,w as N,x as v,y as w,H as k,z as S,D as T,X as C,R as D,E,q as P,b as R,M as I,G as $,I as M,J as F,K as B,L,V as _,N as z}from"./icons-CSMXKUV2.js";import{u as A}from"./categoryStore-DGwHaERV.js";import"./vendor-state-Jewp0_hO.js";const W=new class{intervalId=null;TICK_INTERVAL=100;SLEEP_DETECTION_THRESHOLD=2e3;lastTickTime=0;isInitialized=!1;constructor(){this.initialize()}initialize(){this.isInitialized||(this.setupVisibilityChangeListener(),this.setupBeforeUnloadListener(),this.setupFocusListeners(),this.requestNotificationPermission(),this.isInitialized=!0)}start(){null!==this.intervalId&&this.stop(),this.lastTickTime=Date.now(),this.intervalId=window.setInterval(()=>{this.tick()},this.TICK_INTERVAL)}stop(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}tick(){const e=Date.now(),s=e-this.lastTickTime;s>this.SLEEP_DETECTION_THRESHOLD&&this.handleSystemSleepDetection(s),a.getState().tick(),a.getState().updateLastActiveTime(),this.lastTickTime=e}handleSystemSleepDetection(e){const s=a.getState();s.isRunning&&!s.isPaused&&(s.detectSystemSleep(),this.showSleepDetectionNotification(Math.round(e/1e3)))}showSleepDetectionNotification(e){if(!a.getState().sessionPreferences.notificationsEnabled)return;const s=`System sleep detected (${e}s gap). Timer has been paused.`;"Notification"in window&&"granted"===Notification.permission&&new Notification("Timer Paused - Sleep Detected",{body:s,icon:"/favicon.ico",requireInteraction:!0})}setupVisibilityChangeListener(){document.addEventListener("visibilitychange",()=>{const e=a.getState();document.hidden?e.updateLastActiveTime():(e.updateLastActiveTime(),e.detectSystemSleep())})}setupBeforeUnloadListener(){window.addEventListener("beforeunload",()=>{const e=a.getState();if(e.isRunning){const s={isRunning:e.isRunning,isPaused:e.isPaused,remainingTime:e.remainingTime,sessionType:e.sessionType,plannedDuration:e.plannedDuration,startTime:e.startTime,pausedTime:e.pausedTime,currentSession:e.currentSession,lastActiveTime:Date.now()};localStorage.setItem("timerState",JSON.stringify(s))}})}setupFocusListeners(){let e=null;const s=()=>{e&&clearTimeout(e),e=window.setTimeout(()=>{this.handleIdleDetection()},3e5),a.getState().updateLastActiveTime()};["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(e=>{document.addEventListener(e,s,{passive:!0})}),s()}handleIdleDetection(){const e=a.getState();e.isRunning&&!e.isPaused&&this.showIdleNotification()}showIdleNotification(){if(a.getState().sessionPreferences.notificationsEnabled&&"Notification"in window&&"granted"===Notification.permission){const e=new Notification("Are you still there?",{body:"You seem to be away. Would you like to pause the timer?",icon:"/favicon.ico",requireInteraction:!0});e.onclick=()=>{window.focus(),e.close()}}}requestNotificationPermission(){"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then(e=>{})}recoverTimerState(){try{const e=localStorage.getItem("timerState");if(!e)return!1;const s=JSON.parse(e),t=Date.now()-s.lastActiveTime;if(t>6e5)return localStorage.removeItem("timerState"),!1;const r=a.getState(),n=Math.floor(t/1e3),i=Math.max(0,s.remainingTime-n);return r.startTimer(s.sessionType,s.plannedDuration,s.currentSession?.taskId,s.currentSession?.categoryId),a.setState({remainingTime:i,isPaused:s.isPaused||t>2e3,currentSession:s.currentSession,isSystemSleepDetected:t>2e3}),localStorage.removeItem("timerState"),!0}catch(e){return localStorage.removeItem("timerState"),!1}}getCurrentTime(){return Date.now()}formatTime(e,s=!1){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;if(s)return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return`${Math.floor(e/60).toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}getSessionProgress(e,s){const t=60*s,a=t-e;return Math.min(100,Math.max(0,a/t*100))}getSessionTypeDisplayName(e){switch(e){case"deep_work":return"Deep Work";case"quick_task":return"Quick Task";case"break":return"Break Time";case"custom":return"Custom Session";default:return"Focus Session"}}getSessionTypeColor(e){switch(e){case"deep_work":return"#3B82F6";case"quick_task":return"#10B981";case"break":return"#F59E0B";case"custom":return"#8B5CF6";default:return"#6B7280"}}},q=()=>{const s=e.useRef(W),t=e.useRef(!1),{isRunning:r,isPaused:n,remainingTime:i,sessionType:l,plannedDuration:o,currentSession:c,isSystemSleepDetected:d,startTimer:m,pauseTimer:u,resumeTimer:x,stopTimer:g,completeSession:h,updateSessionType:p,updatePlannedDuration:f,updateSessionPreferences:y,sessionPreferences:b,switchTask:j,completeCurrentTask:N,updateTaskActualDuration:v}=a();e.useEffect(()=>{if(!t.current){s.current.recoverTimerState();s.current.start(),t.current=!0}return()=>{t.current&&(s.current.stop(),t.current=!1)}},[]);const w=s.current.formatTime(i,i>=3600),k=s.current.getSessionProgress(i,o),S=s.current.getSessionTypeDisplayName(l),T=s.current.getSessionTypeColor(l);return{isRunning:r,isPaused:n,remainingTime:i,sessionType:l,plannedDuration:o,currentSession:c,isSystemSleepDetected:d,sessionPreferences:b,formattedTime:w,progress:k,sessionTypeDisplayName:S,sessionTypeColor:T,startTimer:(e,t,a,r)=>{const n=t||s.current.getDurationForSessionType(e);m(e,n,a,r)},pauseTimer:u,resumeTimer:x,stopTimer:g,completeSession:async(e,s)=>{await h(e,s)},updateSessionType:p,updatePlannedDuration:f,updateSessionPreferences:y,switchTask:j,completeCurrentTask:N,updateTaskActualDuration:v,getDurationOptions:e=>{switch(e){case"deep_work":default:return[25,45,50,90];case"quick_task":return[5,10,15,25];case"break":return[5,10,15,30];case"custom":return[15,25,30,45,60,90]}},canStartTimer:()=>!r,canPauseTimer:()=>r&&!n,canResumeTimer:()=>r&&n,canStopTimer:()=>r,formatTime:s.current.formatTime,getSessionProgress:s.current.getSessionProgress,getSessionTypeDisplayName:s.current.getSessionTypeDisplayName,getSessionTypeColor:s.current.getSessionTypeColor}};function O(...e){return l(i(e))}const Y=s.memo(({time:e,isRunning:s,isPaused:a,color:r,className:n})=>t.jsxs("div",{className:O("text-center w-full h-full flex flex-col items-center justify-center",n),children:[t.jsx("div",{className:"relative flex items-center justify-center w-full max-w-[280px] h-[120px] px-4",style:{maxWidth:"280px"},children:t.jsx("div",{className:O("font-mono font-bold transition-all duration-300","leading-none text-center overflow-hidden","tabular-nums",{"text-gray-800 dark:text-gray-200":!s,"animate-pulse":a}),style:{fontSize:"clamp(3rem, 8vw, 5.5rem)",color:s?r:void 0,textShadow:s?`0 0 20px ${r}40`:void 0,maxWidth:"100%",whiteSpace:"nowrap"},children:e})}),t.jsxs("div",{className:"mt-4",children:[s&&!a&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:r}}),t.jsx("span",{className:"text-lg font-medium",style:{color:r},children:"Focus Time"})]}),s&&a&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),t.jsx("span",{className:"text-lg font-medium text-yellow-600 dark:text-yellow-400",children:"Paused"})]}),!s&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),t.jsx("span",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"Ready"})]})]})]}));Y.displayName="CountdownDisplay";const H=s.memo(({progress:s,color:a,size:r,strokeWidth:n,isRunning:i,isPaused:l,className:o})=>{const{radius:c,circumference:d,strokeDasharray:m,strokeDashoffset:u}=e.useMemo(()=>{const e=(r-n)/2,t=2*e*Math.PI;return{radius:e,circumference:t,strokeDasharray:t,strokeDashoffset:t-s/100*t}},[r,n,s]);return t.jsx("div",{className:o,children:t.jsxs("svg",{width:r,height:r,className:"transform -rotate-90 transition-all duration-300",children:[t.jsx("circle",{cx:r/2,cy:r/2,r:c,stroke:"currentColor",strokeWidth:n,fill:"transparent",className:"text-gray-200 dark:text-gray-700"}),t.jsx("circle",{cx:r/2,cy:r/2,r:c,stroke:a,strokeWidth:n,fill:"transparent",strokeDasharray:m,strokeDashoffset:u,strokeLinecap:"round",className:"transition-all duration-500 ease-in-out "+(l?"animate-pulse":""),style:{filter:i?`drop-shadow(0 0 8px ${a}60)`:void 0}}),i&&!l&&t.jsx("circle",{cx:r/2,cy:r/2,r:c,stroke:a,strokeWidth:n/2,fill:"transparent",strokeDasharray:m,strokeDashoffset:u,strokeLinecap:"round",className:"animate-pulse opacity-50"})]})})});H.displayName="ProgressRing";const G=({isRunning:s,isPaused:a,canStart:r,canPause:n,canResume:i,canStop:l,onStart:u,onPause:x,onResume:g,onStop:h,onComplete:p})=>(e.useEffect(()=>{const e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.code){case"Space":e.preventDefault(),r?u():n?x():i&&g();break;case"Escape":e.preventDefault(),l&&h();break;case"Enter":e.preventDefault(),s&&p()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,n,i,l,s,u,x,g,h,p]),t.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[r&&t.jsx("button",{onClick:u,className:O("flex items-center justify-center w-16 h-16 rounded-full","bg-green-500 hover:bg-green-600 text-white","shadow-lg hover:shadow-xl transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-green-300","group"),title:"Start session (Space)",children:t.jsx(o,{className:"w-8 h-8 ml-1 group-hover:scale-110 transition-transform"})}),n&&t.jsx("button",{onClick:x,className:O("flex items-center justify-center w-16 h-16 rounded-full","bg-yellow-500 hover:bg-yellow-600 text-white","shadow-lg hover:shadow-xl transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-yellow-300","group"),title:"Pause session (Space)",children:t.jsx(c,{className:"w-8 h-8 group-hover:scale-110 transition-transform"})}),i&&t.jsx("button",{onClick:g,className:O("flex items-center justify-center w-16 h-16 rounded-full","bg-blue-500 hover:bg-blue-600 text-white","shadow-lg hover:shadow-xl transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300","group"),title:"Resume session (Space)",children:t.jsx(o,{className:"w-8 h-8 ml-1 group-hover:scale-110 transition-transform"})}),l&&t.jsx("button",{onClick:h,className:O("flex items-center justify-center w-12 h-12 rounded-full","bg-red-500 hover:bg-red-600 text-white","shadow-md hover:shadow-lg transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-red-300","group"),title:"Stop session (Esc)",children:t.jsx(d,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),s&&t.jsx("button",{onClick:p,className:O("flex items-center justify-center w-12 h-12 rounded-full","bg-emerald-500 hover:bg-emerald-600 text-white","shadow-md hover:shadow-lg transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-emerald-300","group"),title:"Complete session (Enter)",children:t.jsx(m,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]})),V=[{type:"deep_work",name:"Deep Work",description:"Focused, uninterrupted work sessions",icon:t.jsx(u,{className:"w-6 h-6"}),color:"#3B82F6",defaultDuration:50},{type:"quick_task",name:"Quick Task",description:"Short, focused tasks and activities",icon:t.jsx(x,{className:"w-6 h-6"}),color:"#10B981",defaultDuration:15},{type:"break",name:"Break Time",description:"Rest and recharge between sessions",icon:t.jsx(g,{className:"w-6 h-6"}),color:"#F59E0B",defaultDuration:10},{type:"custom",name:"Custom",description:"Customizable session with your duration",icon:t.jsx(h,{className:"w-6 h-6"}),color:"#8B5CF6",defaultDuration:25}],Q=({currentType:s,onTypeChange:a})=>{const[r,n]=e.useState(!1),[i,l]=e.useState(s),{getDurationOptions:o,updatePlannedDuration:c,plannedDuration:d}=q(),m=V.find(e=>e.type===s);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid grid-cols-2 gap-4",children:V.map(e=>{const r=e.type===s;return t.jsxs("button",{onClick:()=>{return s=e.type,l(s),a(s),void("custom"===s&&n(!0));var s},className:O("p-4 rounded-xl border-2 transition-all duration-200","hover:shadow-lg transform hover:scale-105","focus:outline-none focus:ring-4 focus:ring-opacity-50",{"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800":!r,"shadow-lg":r}),style:{borderColor:r?e.color:void 0,backgroundColor:r?`${e.color}10`:void 0,focusRingColor:`${e.color}50`},children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${e.color}20`,color:e.color},children:e.icon}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.defaultDuration," min"]})]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-left",children:e.description})]},e.type)})}),(r||"custom"===s)&&t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Select Duration"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:o(i).map(e=>t.jsxs("button",{onClick:()=>(e=>{c(e),n(!1)})(e),className:O("px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","hover:shadow-md transform hover:scale-105","focus:outline-none focus:ring-2 focus:ring-opacity-50",{"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300":e!==d,"text-white shadow-md":e===d}),style:{backgroundColor:e===d?m?.color:void 0,focusRingColor:`${m?.color}50`},children:[e,"m"]},e))})]}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-full",children:[t.jsx("div",{className:"p-1 rounded-full",style:{backgroundColor:m?.color},children:m?.icon&&t.jsx("div",{className:"text-white scale-75",children:m.icon})}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[m?.name," • ",d," minutes"]})]})})]})},K=({onResume:e,onStop:s})=>t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-full",children:t.jsx(p,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Sleep Detected"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your timer has been paused"})]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"It looks like your computer went to sleep or was inactive for a while. Your timer has been automatically paused to ensure accurate time tracking."})}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:e,className:O("flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl","bg-blue-500 hover:bg-blue-600 text-white font-medium","shadow-lg hover:shadow-xl transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300"),children:[t.jsx(o,{className:"w-4 h-4"}),t.jsx("span",{children:"Resume Timer"})]}),t.jsxs("button",{onClick:s,className:O("flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl","bg-gray-500 hover:bg-gray-600 text-white font-medium","shadow-lg hover:shadow-xl transform hover:scale-105","transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-gray-300"),children:[t.jsx(d,{className:"w-4 h-4"}),t.jsx("span",{children:"Stop Session"})]})]}),t.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsx("strong",{children:"Tip:"})," To prevent interruptions, consider adjusting your computer's sleep settings during focus sessions."]})})]})}),J=({selectedTaskId:s,onTaskSelect:a,onCreateTask:r,className:i})=>{const[l,o]=e.useState(""),[c,d]=e.useState(!1),{tasks:m,filteredTasks:u,fetchTasks:x,setFilters:g,getTasksByStatus:h}=n(),{categories:p,fetchCategories:N}=A();e.useEffect(()=>{x(),N()},[x,N]),e.useEffect(()=>{g({searchQuery:l||void 0})},[l,g]);const v=h("active"),w=l?u.filter(e=>"active"===e.status):v,k=s?m.find(e=>e.id===s):null,S=e=>p.find(s=>s.id===e.categoryId),T=e=>{if(!e)return"No estimate";if(e<60)return`${e}m`;const s=Math.floor(e/60),t=e%60;return t>0?`${s}h ${t}m`:`${s}h`};return t.jsxs("div",{className:O("relative",i),children:[t.jsx("button",{onClick:()=>d(!c),className:O("w-full p-4 rounded-lg border-2 border-dashed transition-all duration-200","hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20",k?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:k?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S(k)?.color||"#6B7280"}}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:k.title}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[S(k)?.name," • ",T(k.estimatedDuration)]})]})]}),t.jsx(f,{className:"w-5 h-5 text-blue-500"})]}):t.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-500 dark:text-gray-400",children:[t.jsx(f,{className:"w-5 h-5"}),t.jsx("span",{children:"Select a task (optional)"})]})}),c&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-hidden",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"relative",children:[t.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})}),t.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[t.jsx("button",{onClick:()=>{a(null),d(!1)},className:O("w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",!k&&"bg-blue-50 dark:bg-blue-900/20"),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"No specific task"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"General focus session"})]})]})}),w.map(e=>{const s=S(e),r=k?.id===e.id;return t.jsx("button",{onClick:()=>{a(e),d(!1)},className:O("w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",r&&"bg-blue-50 dark:bg-blue-900/20"),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s?.color||"#6B7280"}}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.title}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s?.name," • ",T(e.estimatedDuration)]}),e.description&&t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 line-clamp-1",children:e.description})]})]}),t.jsx("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:e.estimatedDuration&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(b,{className:"w-3 h-3"}),t.jsx("span",{children:T(e.estimatedDuration)})]})})]})},e.id)}),0===w.length&&t.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(f,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"font-medium",children:"No active tasks found"}),t.jsx("p",{className:"text-sm mt-1",children:l?"Try a different search term":"Create a task to get started"})]})]}),r&&t.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("button",{onClick:()=>{r(),d(!1)},className:"w-full flex items-center justify-center space-x-2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",children:[t.jsx(j,{className:"w-4 h-4"}),t.jsx("span",{className:"font-medium",children:"Create new task"})]})})]}),c&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})},U=({currentTaskId:s,onTaskSwitch:a,sessionDuration:r,className:i})=>{const[l,o]=e.useState(!1),{tasks:c,getTasksByStatus:d}=n(),{categories:m}=A(),u=d("active").filter(e=>e.id!==s),x=s?c.find(e=>e.id===s):null,g=e=>m.find(s=>s.id===e.categoryId),h=e=>{if(e<60)return`${e}m`;const s=Math.floor(e/60),t=e%60;return t>0?`${s}h ${t}m`:`${s}h`},p=e=>{if(r>5){const s=e?`Switch to "${e.title}"? Current progress (${h(r)}) will be saved.`:`Switch to general focus? Current progress (${h(r)}) will be saved.`;window.confirm(s)&&(a(e),o(!1))}else a(e),o(!1)};return t.jsxs("div",{className:O("relative",i),children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(f,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Current Task:"})]}),x?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g(x)?.color||"#6B7280"}}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x.title}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",g(x)?.name,")"]})]}):t.jsx("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"General focus session"})]}),t.jsxs("button",{onClick:()=>o(!l),className:O("flex items-center space-x-2 px-3 py-2 rounded-md transition-colors","hover:bg-gray-100 dark:hover:bg-gray-700","focus:outline-none focus:ring-2 focus:ring-blue-500",l&&"bg-gray-100 dark:bg-gray-700"),title:"Switch task",children:[t.jsx(N,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Switch"}),t.jsx(v,{className:O("w-4 h-4 text-gray-600 dark:text-gray-400 transition-transform",l&&"rotate-180")})]})]}),t.jsxs("div",{className:"mt-3 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(b,{className:"w-3 h-3"}),t.jsxs("span",{children:["Session time: ",h(r)]})]}),x?.estimatedDuration&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(f,{className:"w-3 h-3"}),t.jsxs("span",{children:["Estimated: ",h(x.estimatedDuration),r>0&&t.jsxs("span",{className:O("ml-1",r>x.estimatedDuration?"text-orange-500":"text-green-500"),children:["(",r>x.estimatedDuration?"+":"",r-x.estimatedDuration,"m)"]})]})]})]})]}),l&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-64 overflow-hidden",children:[t.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Switch to different task"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Current progress will be saved automatically"})]}),t.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[s&&t.jsx("button",{onClick:()=>p(null),className:"w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"General focus session"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No specific task"})]})]})}),u.map(e=>{const s=g(e);return t.jsx("button",{onClick:()=>p(e),className:"w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s?.color||"#6B7280"}}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.title}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s?.name,e.estimatedDuration&&` • ${h(e.estimatedDuration)}`]})]})]}),t.jsx(N,{className:"w-4 h-4 text-gray-400"})]})},e.id)}),0===u.length&&!s&&t.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(f,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"font-medium",children:"No other tasks available"}),t.jsx("p",{className:"text-sm mt-1",children:"Create more tasks to switch between them"})]})]})]}),l&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]})},Z=({type:s,isVisible:a,onComplete:r,duration:n=3e3,message:i})=>{const[l,o]=e.useState("enter"),[c,d]=e.useState(0),m=(()=>{switch(s){case"session_start":return{icon:T,color:"from-yellow-400 to-orange-500",bgColor:"from-yellow-50 to-orange-50",title:"Focus Session Starting",defaultMessage:"Take a deep breath and prepare to focus",particles:"✨",animation:"sunrise"};case"session_end":return{icon:S,color:"from-green-400 to-blue-500",bgColor:"from-green-50 to-blue-50",title:"Session Complete",defaultMessage:"Well done! Take a moment to appreciate your progress",particles:"🌟",animation:"celebration"};case"break_start":return{icon:g,color:"from-purple-400 to-pink-500",bgColor:"from-purple-50 to-pink-50",title:"Break Time",defaultMessage:"Relax and recharge your energy",particles:"☕",animation:"gentle-wave"};case"break_end":return{icon:x,color:"from-blue-400 to-cyan-500",bgColor:"from-blue-50 to-cyan-50",title:"Break Complete",defaultMessage:"Ready to return to focused work",particles:"⚡",animation:"energy-pulse"};case"task_complete":return{icon:k,color:"from-red-400 to-pink-500",bgColor:"from-red-50 to-pink-50",title:"Task Completed",defaultMessage:"Excellent work! Your dedication is paying off",particles:"💖",animation:"heart-pulse"};default:return{icon:w,color:"from-indigo-400 to-purple-500",bgColor:"from-indigo-50 to-purple-50",title:"Transition",defaultMessage:"Taking a mindful moment",particles:"🌙",animation:"gentle-fade"}}})(),u=m.icon;e.useEffect(()=>{if(!a)return;const e=n-1600;o("enter");const s=setTimeout(()=>{o("display");const s=setTimeout(()=>{o("exit");const e=setTimeout(()=>{r()},800);return()=>clearTimeout(e)},e);return()=>clearTimeout(s)},800);return()=>clearTimeout(s)},[a,n,r]),e.useEffect(()=>{if("display"!==l)return;const e=n-1600,s=setInterval(()=>{d(s=>{const t=s+100/(e/100);return Math.min(t,100)})},100);return()=>clearInterval(s)},[l,n]);return a?t.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:[t.jsxs("div",{className:`relative ${(()=>{const e="transition-all duration-800 ease-in-out";switch(l){case"enter":return`${e} opacity-0 scale-95 translate-y-4`;case"display":return`${e} opacity-100 scale-100 translate-y-0`;case"exit":return`${e} opacity-0 scale-105 translate-y-2`;default:return e}})()}`,children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${m.bgColor} rounded-3xl blur-xl scale-110`}),t.jsxs("div",{className:"relative bg-white bg-opacity-90 backdrop-blur-sm rounded-3xl p-12 max-w-md w-full mx-4 shadow-2xl border border-white border-opacity-50",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-3xl",children:Array.from({length:12},(e,s)=>t.jsx("div",{className:"absolute text-2xl opacity-60 animate-float-"+s%4,style:{left:10+7*s+"%",top:20+s%3*20+"%",animationDelay:.2*s+"s",animationDuration:3+s%2+"s"},children:m.particles},s))}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br ${m.color} text-white mb-4 ${(()=>{switch(m.animation){case"sunrise":return"animate-spin-slow";case"celebration":return"animate-bounce";case"gentle-wave":case"heart-pulse":default:return"animate-pulse";case"energy-pulse":return"animate-ping"}})()}`,children:t.jsx(u,{className:"w-10 h-10"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:m.title}),t.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:i||m.defaultMessage})]}),"display"===l&&t.jsx("div",{className:"mt-6",children:t.jsx("div",{className:"w-full bg-gray-200 bg-opacity-50 rounded-full h-1",children:t.jsx("div",{className:`h-1 rounded-full bg-gradient-to-r ${m.color} transition-all duration-100 ease-out`,style:{width:`${c}%`}})})}),n>5e3&&"display"===l&&t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("div",{className:"inline-flex items-center space-x-2 text-sm text-gray-500",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),t.jsx("span",{children:"Take slow, deep breaths"})]})})]}),t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${m.color} opacity-10 rounded-3xl animate-pulse`})]}),t.jsx("style",{jsx:!0,children:"\n        @keyframes float-0 {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          50% { transform: translateY(-20px) rotate(180deg); }\n        }\n        @keyframes float-1 {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          50% { transform: translateY(-15px) rotate(-180deg); }\n        }\n        @keyframes float-2 {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          50% { transform: translateY(-25px) rotate(90deg); }\n        }\n        @keyframes float-3 {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          50% { transform: translateY(-18px) rotate(-90deg); }\n        }\n        .animate-float-0 { animation: float-0 3s ease-in-out infinite; }\n        .animate-float-1 { animation: float-1 3.5s ease-in-out infinite; }\n        .animate-float-2 { animation: float-2 4s ease-in-out infinite; }\n        .animate-float-3 { animation: float-3 3.2s ease-in-out infinite; }\n        .animate-spin-slow { animation: spin 4s linear infinite; }\n      "})]}):null},X=({isVisible:s,onClose:a,onComplete:r,triggerType:n})=>{const[i,l]=e.useState(null),[d,m]=e.useState(!1),[u,x]=e.useState(0),[g,h]=e.useState(0),p=[{id:"box_breathing",name:"4-7-8 Breathing",description:"Calming breath work to center yourself",duration:120,type:"breathing",icon:t.jsx(k,{className:"w-5 h-5"}),color:"bg-blue-500",instructions:["Sit comfortably with your back straight","Inhale quietly through your nose for 4 counts","Hold your breath for 7 counts","Exhale completely through your mouth for 8 counts","Repeat this cycle 4 times"]},{id:"gratitude_moment",name:"Gratitude Reflection",description:"Take a moment to appreciate what went well",duration:90,type:"gratitude",icon:t.jsx(S,{className:"w-5 h-5"}),color:"bg-yellow-500",instructions:["Close your eyes and take three deep breaths","Think of one thing that went well in your last session","Feel genuine appreciation for this accomplishment","Think of one person you're grateful for today","Hold this feeling of gratitude for a moment"]},{id:"body_scan",name:"Quick Body Scan",description:"Release tension and reset your body",duration:180,type:"body_scan",icon:t.jsx(E,{className:"w-5 h-5"}),color:"bg-green-500",instructions:["Sit or stand comfortably","Start by noticing your feet and legs","Move your attention to your torso and arms","Notice any tension in your shoulders and neck","Relax your face and jaw","Take three deep breaths to finish"]},{id:"intention_setting",name:"Set Your Intention",description:"Clarify your focus for the next session",duration:60,type:"reflection",icon:t.jsx(k,{className:"w-5 h-5"}),color:"bg-purple-500",instructions:["Take a moment to center yourself","Think about what you want to accomplish next","Set a clear, positive intention","Visualize yourself succeeding","Carry this intention into your next session"]}];e.useEffect(()=>{let e;return d&&i&&(e=setInterval(()=>{x(e=>e>=i.duration?(m(!1),r(i.id,i.duration),e):e+1)},1e3)),()=>{e&&clearInterval(e)}},[d,i,r]),e.useEffect(()=>{if(!d||!i)return;const e=i.duration/i.instructions.length,s=Math.floor(u/e);s!==g&&s<i.instructions.length&&h(s)},[u,i,g,d]);const f=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;if(!s)return null;const y=(()=>{switch(n){case"session_end":return p.filter(e=>"gratitude"===e.type||"body_scan"===e.type);case"session_start":return p.filter(e=>"breathing"===e.type||"reflection"===e.type);case"break_start":return p.filter(e=>"body_scan"===e.type||"breathing"===e.type);default:return p}})();return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden",children:i?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${i.color} text-white p-6`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:i.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold",children:i.name}),t.jsxs("p",{className:"text-white text-opacity-80 text-sm",children:[f(u)," / ",f(i.duration)]})]})]}),t.jsx("button",{onClick:()=>l(null),className:"text-white hover:text-gray-200 transition-colors","aria-label":"Back to exercise selection",children:t.jsx(C,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-2",children:t.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-1000",style:{width:u/i.duration*100+"%"}})})})]}),t.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Step ",g+1," of ",i.instructions.length]}),t.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:i.instructions[g]})]}),t.jsx("div",{className:"space-y-2 mb-6",children:i.instructions.map((e,s)=>t.jsx("div",{className:"p-3 rounded-lg text-sm transition-all "+(s===g?`${i.color} bg-opacity-10 border border-current border-opacity-20`:s<g?"bg-green-50 text-green-700 border border-green-200":"bg-gray-50 text-gray-600"),children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(s===g?"bg-current animate-pulse":s<g?"bg-green-500":"bg-gray-300")}),t.jsx("span",{children:e})]})},s))})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:t.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[t.jsx("button",{onClick:()=>{m(!1),x(0),h(0)},className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-lg transition-colors",title:"Reset exercise",children:t.jsx(D,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{m(!d)},className:"px-6 py-3 rounded-lg font-medium transition-all flex items-center space-x-2 "+(d?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-green-500 text-white hover:bg-green-600"),children:d?t.jsxs(t.Fragment,{children:[t.jsx(c,{className:"w-4 h-4"}),t.jsx("span",{children:"Pause"})]}):t.jsxs(t.Fragment,{children:[t.jsx(o,{className:"w-4 h-4"}),t.jsx("span",{children:"Continue"})]})}),t.jsx("button",{onClick:()=>{i&&(m(!1),r(i.id,u))},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Complete"})]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold",children:(()=>{switch(n){case"session_end":return"Session Complete - Take a Mindful Moment";case"session_start":return"Prepare Mindfully for Your Session";case"break_start":return"Mindful Break Time";default:return"Mindfulness Moment"}})()}),t.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Choose a mindful transition exercise"})]}),t.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close mindfulness prompt",children:t.jsx(C,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"space-y-3",children:y.map(e=>t.jsx("button",{onClick:()=>(e=>{l(e),m(!0),x(0),h(0)})(e),className:"w-full p-4 rounded-lg border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all text-left group",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${e.color} text-white group-hover:scale-110 transition-transform`,children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsx("span",{children:f(e.duration)}),t.jsx("span",{className:"capitalize",children:e.type.replace("_"," ")})]})]})]})},e.id))}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:a,className:"w-full py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Skip mindfulness moment"})})]})]})})})},ee=({isVisible:s,onClose:a,onSubmit:r,session:n,task:i,sessionDuration:l})=>{const[o,c]=e.useState(0),[d,u]=e.useState({qualityRating:0,focusRating:0,energyLevel:0,accomplishments:"",challenges:"",improvements:"",gratitude:"",nextSessionGoal:"",mood:"satisfied",tags:[]}),x=[{id:"energized",name:"Energized",icon:"⚡",color:"bg-yellow-100 text-yellow-800"},{id:"calm",name:"Calm",icon:"🧘",color:"bg-blue-100 text-blue-800"},{id:"satisfied",name:"Satisfied",icon:"😊",color:"bg-green-100 text-green-800"},{id:"motivated",name:"Motivated",icon:"🚀",color:"bg-purple-100 text-purple-800"},{id:"tired",name:"Tired",icon:"😴",color:"bg-gray-100 text-gray-800"},{id:"frustrated",name:"Frustrated",icon:"😤",color:"bg-red-100 text-red-800"}],g=["Deep Work","Flow State","Distracted","Productive","Creative","Problem Solving","Learning","Planning","Research","Writing","Coding","Design","Meeting","Email","Admin"],h=[{title:"Rate Your Session",description:"How did this session go overall?",component:"ratings"},{title:"Reflect on Progress",description:"What did you accomplish and learn?",component:"accomplishments"},{title:"Identify Challenges",description:"What obstacles did you face?",component:"challenges"},{title:"Express Gratitude",description:"What are you grateful for right now?",component:"gratitude"},{title:"Set Next Intention",description:"What will you focus on next?",component:"intention"}],p=(e,s)=>{u(t=>({...t,[e]:s}))},y=()=>{r(d)},b=(e,s,a,r,n)=>t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${n}`,children:r}),t.jsx("label",{className:"font-medium text-gray-900",children:e})]}),t.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(e=>t.jsx("button",{onClick:()=>a(e),className:"w-10 h-10 rounded-full border-2 transition-all "+(s>=e?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-600 hover:border-blue-400"),children:e},e))}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[t.jsx("span",{children:"Poor"}),t.jsx("span",{children:"Excellent"})]})]});if(!s)return null;const j=h[o],N=o===h.length-1;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Session Reflection"}),t.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[i?`Task: ${i.title}`:`${n.sessionType} session`," • ",l," min"]})]}),t.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close reflection",children:t.jsx(C,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[t.jsx("span",{children:j.title}),t.jsxs("span",{children:["Step ",o+1," of ",h.length]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:(o+1)/h.length*100+"%"}})})]}),t.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[t.jsx("div",{className:"mb-4",children:t.jsx("p",{className:"text-gray-600 text-sm",children:j.description})}),(()=>{switch(h[o].component){case"ratings":return t.jsxs("div",{className:"space-y-6",children:[b("Session Quality",d.qualityRating,e=>p("qualityRating",e),t.jsx(P,{className:"w-4 h-4"}),"bg-yellow-100 text-yellow-600"),b("Focus Level",d.focusRating,e=>p("focusRating",e),t.jsx(f,{className:"w-4 h-4"}),"bg-blue-100 text-blue-600"),b("Energy Level",d.energyLevel,e=>p("energyLevel",e),t.jsx(R,{className:"w-4 h-4"}),"bg-green-100 text-green-600"),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-3",children:"How are you feeling?"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(e=>t.jsxs("button",{onClick:()=>p("mood",e.id),className:"p-3 rounded-lg border-2 transition-all text-center "+(d.mood===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[t.jsx("div",{className:"text-2xl mb-1",children:e.icon}),t.jsx("div",{className:"text-xs font-medium",children:e.name})]},e.id))})]})]});case"accomplishments":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"What did you accomplish in this session?"}),t.jsx("textarea",{value:d.accomplishments,onChange:e=>p("accomplishments",e.target.value),placeholder:"Describe what you completed, learned, or made progress on...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"Tag this session (optional)"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(e=>t.jsx("button",{onClick:()=>(e=>{u(s=>({...s,tags:s.tags.includes(e)?s.tags.filter(s=>s!==e):[...s.tags,e]}))})(e),className:"px-3 py-1 rounded-full text-sm transition-all "+(d.tags.includes(e)?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]});case"challenges":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"What challenges did you face?"}),t.jsx("textarea",{value:d.challenges,onChange:e=>p("challenges",e.target.value),placeholder:"Describe any obstacles, distractions, or difficulties...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"How could you improve next time?"}),t.jsx("textarea",{value:d.improvements,onChange:e=>p("improvements",e.target.value),placeholder:"What strategies or changes might help you be more effective?",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]})]});case"gratitude":return t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"What are you grateful for right now?"}),t.jsx("textarea",{value:d.gratitude,onChange:e=>p("gratitude",e.target.value),placeholder:"Take a moment to appreciate something positive from this session or your day...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Gratitude helps reinforce positive experiences and build resilience."})]});case"intention":return t.jsxs("div",{children:[t.jsx("label",{className:"block font-medium text-gray-900 mb-2",children:"What will you focus on in your next session?"}),t.jsx("textarea",{value:d.nextSessionGoal,onChange:e=>p("nextSessionGoal",e.target.value),placeholder:"Set a clear intention for your next work session...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Setting intentions helps maintain momentum and clarity."})]});default:return null}})()]}),t.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:()=>{o>0&&c(e=>e-1)},disabled:0===o,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),t.jsx("button",{onClick:()=>{o<h.length-1?c(e=>e+1):y()},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:N?t.jsxs(t.Fragment,{children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{children:"Complete Reflection"})]}):t.jsx("span",{children:"Next"})})]})})]})})},se=({isOpen:s,onClose:a,task:n,session:i,onTaskComplete:l,onSessionComplete:o})=>{const[c,d]=e.useState(4),[u,x]=e.useState(""),[g,h]=e.useState(!1),[p,y]=e.useState(!1),[j,N]=e.useState(!0),[v,w]=e.useState("animation"),{categories:k}=A(),{mindfulnessEnabled:S,transitionAnimationsEnabled:T,breathingExerciseEnabled:D,sessionReflectionEnabled:E,recordMindfulnessSession:R}=r();if(!s)return null;const $=n?k.find(e=>e.id===n.categoryId):null,M=e=>{if(e<60)return`${e}m`;const s=Math.floor(e/60),t=e%60;return t>0?`${s}h ${t}m`:`${s}h`},F=i.actualDuration||0,B=(()=>{if(!n?.estimatedDuration)return null;const e=(n.actualDuration||0)+F,s=n.estimatedDuration,t=Math.round(e/s*100),a=e-s;return{totalActualTime:e,estimatedTime:s,progressPercentage:t,timeVariance:a,isOverEstimate:a>0,isComplete:t>=100}})(),L=()=>{"animation"===v?w("prompt"):"prompt"===v?w("reflection"):"reflection"===v&&(w("completion"),N(!1))},_=()=>{N(!1),w("completion")};return s&&S&&j?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:["animation"===v&&t.jsx(Z,{onComplete:L,onSkip:_}),"prompt"===v&&D&&t.jsx(X,{onComplete:L,onSkip:_}),"reflection"===v&&E&&t.jsx(ee,{session:i,task:n,onComplete:L,onSkip:_})]})}):t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:t.jsx(m,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Complete!"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[M(F)," of focused work"]})]})]}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(C,{className:"w-5 h-5"})})]})}),n&&t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full mt-0.5",style:{backgroundColor:$?.color||"#6B7280"}}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:n.title}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:$?.name}),B&&t.jsxs("div",{className:"mt-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress:"}),t.jsxs("span",{className:O("font-medium",B.isComplete?"text-green-600 dark:text-green-400":"text-blue-600 dark:text-blue-400"),children:[B.progressPercentage,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:O("h-2 rounded-full transition-all duration-300",B.isComplete?"bg-green-500":"bg-blue-500"),style:{width:`${Math.min(B.progressPercentage,100)}%`}})}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(b,{className:"w-3 h-3"}),t.jsxs("span",{children:["Total: ",M(B.totalActualTime)]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(f,{className:"w-3 h-3"}),t.jsxs("span",{children:["Est: ",M(B.estimatedTime)]})]})]}),0!==B.timeVariance&&t.jsxs("p",{className:O("text-xs text-center",B.isOverEstimate?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),children:[B.isOverEstimate?"+":"-",M(Math.abs(B.timeVariance)),B.isOverEstimate?" over estimate":" under estimate"]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:g,onChange:e=>h(e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mark this task as complete"})]}),g&&t.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 ml-6",children:"Task will be moved to completed status"})]})]})]})}),t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How was your focus quality?"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map(e=>t.jsx("button",{onClick:()=>d(e),className:O("w-8 h-8 rounded-full flex items-center justify-center transition-colors",e<=c?"text-yellow-400 hover:text-yellow-500":"text-gray-300 dark:text-gray-600 hover:text-gray-400"),children:t.jsx(P,{className:O("w-5 h-5",e<=c&&"fill-current")})},e)),t.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:[1===c&&"Poor",2===c&&"Fair",3===c&&"Good",4===c&&"Great",5===c&&"Excellent"]})]})]}),t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session notes (optional)"}),t.jsxs("div",{className:"relative",children:[t.jsx(I,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),t.jsx("textarea",{value:u,onChange:e=>x(e.target.value),placeholder:"What did you accomplish? Any insights or challenges?",rows:3,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end space-x-3",children:[t.jsx("button",{onClick:a,disabled:p,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:async()=>{y(!0);try{await o(c,u||void 0),g&&n&&await l(n.id),S&&!j&&R("session_completion",30),a()}catch(e){}finally{y(!1)}},disabled:p,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors disabled:opacity-50 flex items-center space-x-2",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Saving..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{children:"Complete Session"})]})})]})]})})},te=()=>{const{isRunning:s,currentSession:r}=a(),[n,i]=e.useState({isEnabled:!1,isFullscreen:!1,notificationsSuppressed:!1,ambientSoundEnabled:!1,websiteBlockingEnabled:!1,currentAmbientSound:null}),[l,o]=e.useState(!1),c=[{id:"rain",name:"Rain",icon:"🌧️"},{id:"forest",name:"Forest",icon:"🌲"},{id:"ocean",name:"Ocean Waves",icon:"🌊"},{id:"cafe",name:"Coffee Shop",icon:"☕"},{id:"white_noise",name:"White Noise",icon:"📻"},{id:"brown_noise",name:"Brown Noise",icon:"🎵"}];e.useEffect(()=>{s&&r&&!n.isEnabled&&d()},[s,r]),e.useEffect(()=>{const e=()=>{const e=!!document.fullscreenElement;i(s=>({...s,isFullscreen:e}))};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const d=()=>{const e=!n.isEnabled;i(s=>({...s,isEnabled:e,notificationsSuppressed:e})),e?(document.body.classList.add("focus-mode"),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()):(document.body.classList.remove("focus-mode"),document.fullscreenElement&&document.exitFullscreen(),n.currentAmbientSound&&x())},m=e=>{n.ambientSoundEnabled&&n.currentAmbientSound===e?x():u(e||"rain")},u=e=>{if(i(s=>({...s,ambientSoundEnabled:!0,currentAmbientSound:e})),"Notification"in window&&"granted"===Notification.permission){const s=c.find(s=>s.id===e);new Notification("Focus Mode",{body:`${s?.name} ambient sound started`,icon:"/favicon.ico",silent:!0})}},x=()=>{i(e=>({...e,ambientSoundEnabled:!1,currentAmbientSound:null}))};return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("button",{onClick:d,className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all "+(n.isEnabled?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:n.isEnabled?"Exit focus mode":"Enter focus mode",children:[n.isEnabled?t.jsx($,{className:"w-4 h-4"}):t.jsx(M,{className:"w-4 h-4"}),t.jsx("span",{children:"Focus Mode"})]}),n.isEnabled&&t.jsx("button",{onClick:()=>o(!l),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Focus mode options",children:t.jsx(F,{className:"w-4 h-4"})})]}),n.isEnabled&&l&&t.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-4 min-w-[300px] z-50",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Focus Mode Options"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[n.isFullscreen?t.jsx(B,{className:"w-4 h-4 text-blue-600"}):t.jsx(L,{className:"w-4 h-4 text-gray-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Fullscreen"})]}),t.jsx("button",{onClick:async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(e){}},className:"px-3 py-1 rounded text-xs font-medium transition-colors "+(n.isFullscreen?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:n.isFullscreen?"Exit":"Enable"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Block notifications"})]}),t.jsx("button",{onClick:()=>{i(e=>({...e,notificationsSuppressed:!e.notificationsSuppressed}))},className:"px-3 py-1 rounded text-xs font-medium transition-colors "+(n.notificationsSuppressed?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:n.notificationsSuppressed?"Blocked":"Allow"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(F,{className:"w-4 h-4 text-orange-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Block websites"})]}),t.jsx("button",{onClick:()=>{const e=!n.websiteBlockingEnabled;i(s=>({...s,websiteBlockingEnabled:e})),e&&"Notification"in window&&"granted"===Notification.permission&&new Notification("Focus Mode",{body:"Distracting websites are now blocked",icon:"/favicon.ico",silent:!0})},className:"px-3 py-1 rounded text-xs font-medium transition-colors "+(n.websiteBlockingEnabled?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:n.websiteBlockingEnabled?"Blocked":"Allow"})]}),t.jsxs("div",{className:"border-t pt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(z,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Ambient sounds"})]}),n.ambientSoundEnabled&&t.jsx("button",{onClick:()=>m(),className:"text-xs text-red-600 hover:text-red-700",children:"Stop"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(e=>t.jsxs("button",{onClick:()=>m(e.id),className:"flex items-center space-x-2 p-2 rounded text-xs transition-colors "+(n.currentAmbientSound===e.id?"bg-green-100 text-green-700 border border-green-300":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.name})]},e.id))})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Session active:"}),t.jsx("span",{className:s?"text-green-600":"text-gray-400",children:s?"Yes":"No"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Distractions blocked:"}),t.jsx("span",{className:"text-purple-600",children:[n.notificationsSuppressed&&"Notifications",n.websiteBlockingEnabled&&"Websites"].filter(Boolean).join(", ")||"None"})]}),n.currentAmbientSound&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Ambient sound:"}),t.jsx("span",{className:"text-green-600",children:c.find(e=>e.id===n.currentAmbientSound)?.name})]})]})})]})]}),n.isEnabled&&t.jsx("div",{className:"fixed top-4 left-4 z-40 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),t.jsx("span",{children:"Focus Mode Active"})]})})]})},ae=()=>{const[s,a]=e.useState(null),[r,i]=e.useState(!1),[l,o]=e.useState(!1),{isRunning:c,isPaused:d,formattedTime:m,progress:u,sessionType:x,sessionTypeColor:g,sessionTypeDisplayName:h,isSystemSleepDetected:p,currentSession:f,plannedDuration:y,remainingTime:b,startTimer:j,pauseTimer:N,resumeTimer:v,stopTimer:w,completeSession:k,updateSessionType:S,switchTask:T,completeCurrentTask:C,canStartTimer:D,canPauseTimer:E,canResumeTimer:P,canStopTimer:R}=q(),{tasks:I,completeTask:$}=n(),M=f?.taskId?I.find(e=>e.id===f.taskId):null,F=Math.round((60*y-b)/60);return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-8",children:[p&&t.jsx(K,{onResume:v,onStop:w}),t.jsx("div",{className:"absolute top-4 right-4 z-10",children:t.jsx(te,{})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-12 max-w-2xl w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:h}),M&&t.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Working on: ",M.title]})]}),t.jsx("div",{className:"relative flex items-center justify-center mb-12",children:t.jsxs("div",{className:"relative",children:[t.jsx(H,{progress:u,color:g,size:320,strokeWidth:8,isRunning:c,isPaused:d}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Y,{time:m,isRunning:c,isPaused:d,color:g})})]})}),t.jsx("div",{className:"mb-8",children:t.jsx(G,{isRunning:c,isPaused:d,canStart:D(),canPause:E(),canResume:P(),canStop:R(),onStart:()=>j(x,y,s?.id),onPause:N,onResume:v,onStop:w,onComplete:()=>i(!0)})}),!c&&t.jsx("div",{className:"mb-6",children:t.jsx(J,{selectedTaskId:s?.id,onTaskSelect:a,onCreateTask:()=>o(!0)})}),c&&t.jsx("div",{className:"mb-6",children:t.jsx(U,{currentTaskId:f?.taskId,onTaskSwitch:e=>T(e?.id),sessionDuration:F})}),!c&&t.jsx("div",{className:"mt-8",children:t.jsx(Q,{currentType:x,onTypeChange:S})}),t.jsxs("div",{className:"text-center mt-6",children:[c&&!d&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Session in progress"})]}),c&&d&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Session paused"})]}),!c&&t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ready to start"})]})]})]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Keyboard shortcuts: ",t.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs",children:"Space"})," to start/pause,",t.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs ml-2",children:"Esc"})," to stop,",t.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs ml-2",children:"Enter"})," to complete"]})}),r&&f&&t.jsx(se,{isOpen:r,onClose:()=>i(!1),task:M,session:f,onTaskComplete:async e=>{await C(),await $(e)},onSessionComplete:async(e,s)=>{await k(e,s),i(!1)}}),l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg",children:[t.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:"Task creation modal - TODO"}),t.jsx("button",{onClick:()=>o(!1),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Close"})]})})]})},re=()=>t.jsx(ae,{});export{re as default};
//# sourceMappingURL=Timer-Dxr1fVY-.js.map
