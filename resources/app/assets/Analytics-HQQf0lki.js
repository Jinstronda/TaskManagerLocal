import{r as e,j as s}from"./vendor-react-Gj0PPTzM.js";import{c as t}from"./vendor-state-Jewp0_hO.js";import{a1 as a,B as r,b as i,a2 as l,c as d,x as n,O as c,i as o,a3 as x,a4 as m,a5 as g,a6 as h,C as y,a as u,a7 as j,q as p,A as b,a8 as N,t as k,a9 as f,aa as v,ab as w}from"./icons-CSMXKUV2.js";import{R as D,P as S,a as T,C as L,T as $,B as F,b as C,X as E,Y as A,c as P,L as M,d as R,e as Q,A as H,f as W}from"./charts-KMioQ2Xn.js";import"./vendor-misc-CPs7ArQ_.js";import"./utils-BeLtu-UY.js";const z=t((e,s)=>({timeDistribution:[],totalTime:0,timeDistributionTrends:[],productivityPatterns:[],sessionLengthAnalysis:null,productivityHeatmap:[],sessionSuggestions:null,goalProgress:[],weeklyMonthlyReports:null,focusQualityMetrics:null,comparativeAnalysis:null,startDate:new Date(Date.now()-6048e5).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],isLoadingTimeDistribution:!1,isLoadingProductivityPatterns:!1,isLoadingSessionLengthAnalysis:!1,isLoadingProductivityHeatmap:!1,isLoadingSessionSuggestions:!1,isLoadingGoalProgress:!1,isLoadingReports:!1,isLoadingFocusQuality:!1,isLoadingComparative:!1,timeDistributionError:null,productivityPatternsError:null,sessionLengthAnalysisError:null,productivityHeatmapError:null,sessionSuggestionsError:null,goalProgressError:null,reportsError:null,focusQualityError:null,comparativeError:null,setDateRange:(s,t)=>{e({startDate:s,endDate:t})},fetchTimeDistribution:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingTimeDistribution:!0,timeDistributionError:null});try{const s=await fetch(`/api/analytics/time-distribution?startDate=${t}&endDate=${a}`);if(!s.ok)return void e({timeDistribution:[],totalTime:0,isLoadingTimeDistribution:!1,timeDistributionError:`HTTP error! status: ${s.status}`});const r=await s.json();r.success?e({timeDistribution:r.data.timeDistribution||[],totalTime:r.data.totalTime||0,isLoadingTimeDistribution:!1}):e({timeDistribution:[],totalTime:0,isLoadingTimeDistribution:!1,timeDistributionError:r.error?.message||"Failed to fetch time distribution"})}catch(r){e({timeDistribution:[],totalTime:0,timeDistributionError:r instanceof Error?r.message:"Unknown error",isLoadingTimeDistribution:!1})}},fetchProductivityPatterns:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingProductivityPatterns:!0,productivityPatternsError:null});try{const s=await fetch(`/api/analytics/productivity-patterns?startDate=${t}&endDate=${a}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();if(!r.success)throw new Error(r.error?.message||"Failed to fetch productivity patterns");e({productivityPatterns:r.data.patterns,isLoadingProductivityPatterns:!1})}catch(r){e({productivityPatternsError:r instanceof Error?r.message:"Unknown error",isLoadingProductivityPatterns:!1})}},fetchGoalProgress:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingGoalProgress:!0,goalProgressError:null});try{const s=await fetch(`/api/analytics/goal-progress?startDate=${t}&endDate=${a}`);if(!s.ok)return void e({goalProgress:[],isLoadingGoalProgress:!1,goalProgressError:`HTTP error! status: ${s.status}`});const r=await s.json();r.success?e({goalProgress:r.data.goalProgress||[],isLoadingGoalProgress:!1}):e({goalProgress:[],isLoadingGoalProgress:!1,goalProgressError:r.error?.message||"Failed to fetch goal progress"})}catch(r){e({goalProgress:[],goalProgressError:r instanceof Error?r.message:"Unknown error",isLoadingGoalProgress:!1})}},fetchSessionLengthAnalysis:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingSessionLengthAnalysis:!0,sessionLengthAnalysisError:null});try{const s=await fetch(`/api/analytics/session-length-analysis?startDate=${t}&endDate=${a}`);if(!s.ok)return void e({sessionLengthAnalysis:null,isLoadingSessionLengthAnalysis:!1,sessionLengthAnalysisError:`HTTP error! status: ${s.status}`});const r=await s.json();r.success?e({sessionLengthAnalysis:r.data,isLoadingSessionLengthAnalysis:!1}):e({sessionLengthAnalysis:null,isLoadingSessionLengthAnalysis:!1,sessionLengthAnalysisError:r.error?.message||"Failed to fetch session length analysis"})}catch(r){e({sessionLengthAnalysis:null,sessionLengthAnalysisError:r instanceof Error?r.message:"Unknown error",isLoadingSessionLengthAnalysis:!1})}},fetchProductivityHeatmap:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingProductivityHeatmap:!0,productivityHeatmapError:null});try{const s=await fetch(`/api/analytics/productivity-heatmap?startDate=${t}&endDate=${a}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();if(!r.success)throw new Error(r.error?.message||"Failed to fetch productivity heatmap");e({productivityHeatmap:r.data.heatmapData,isLoadingProductivityHeatmap:!1})}catch(r){e({productivityHeatmapError:r instanceof Error?r.message:"Unknown error",isLoadingProductivityHeatmap:!1})}},fetchSessionSuggestions:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingSessionSuggestions:!0,sessionSuggestionsError:null});try{const s=new Date,r=await fetch(`/api/analytics/session-suggestions?hour=${s.getHours()}&dayOfWeek=${s.getDay()}&startDate=${t}&endDate=${a}`);if(!r.ok)return void e({sessionSuggestions:null,isLoadingSessionSuggestions:!1,sessionSuggestionsError:`HTTP error! status: ${r.status}`});const i=await r.json();i.success?e({sessionSuggestions:i.data,isLoadingSessionSuggestions:!1}):e({sessionSuggestions:null,isLoadingSessionSuggestions:!1,sessionSuggestionsError:i.error?.message||"Failed to fetch session suggestions"})}catch(r){e({sessionSuggestions:null,sessionSuggestionsError:r instanceof Error?r.message:"Unknown error",isLoadingSessionSuggestions:!1})}},fetchAllAnalytics:async()=>{const{fetchTimeDistribution:e,fetchProductivityPatterns:t,fetchSessionLengthAnalysis:a,fetchProductivityHeatmap:r,fetchSessionSuggestions:i,fetchGoalProgress:l,fetchTimeDistributionTrends:d,fetchReports:n,fetchFocusQualityMetrics:c,fetchComparativeAnalysis:o}=s();await Promise.all([e(),t(),a(),r(),i(),l(),d(),n(),c(),o("week")])},fetchTimeDistributionTrends:async()=>{const{startDate:t,endDate:a}=s();try{const s=await fetch(`/api/analytics/time-distribution-trends?startDate=${t}&endDate=${a}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();if(!r.success)throw new Error(r.error?.message||"Failed to fetch time distribution trends");e({timeDistributionTrends:r.data.trends})}catch(r){}},exportAnalyticsData:async(e="json")=>{const{startDate:t,endDate:a}=s();try{const s=await fetch(`/api/analytics/export?startDate=${t}&endDate=${a}&format=${e}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.blob(),i=window.URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`analytics-export-${t}-${a}.${e}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}catch(r){throw r}},clearErrors:()=>{e({timeDistributionError:null,productivityPatternsError:null,sessionLengthAnalysisError:null,productivityHeatmapError:null,sessionSuggestionsError:null,goalProgressError:null,reportsError:null,focusQualityError:null,comparativeError:null})},fetchReports:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingReports:!0,reportsError:null});try{const s=await fetch(`/api/analytics/reports?startDate=${t}&endDate=${a}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();if(!r.success)throw new Error(r.error?.message||"Failed to fetch reports");e({weeklyMonthlyReports:r.data,isLoadingReports:!1})}catch(r){e({reportsError:r instanceof Error?r.message:"Unknown error",isLoadingReports:!1})}},fetchFocusQualityMetrics:async()=>{const{startDate:t,endDate:a}=s();e({isLoadingFocusQuality:!0,focusQualityError:null});try{const s=await fetch(`/api/analytics/focus-quality?startDate=${t}&endDate=${a}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();if(!r.success)throw new Error(r.error?.message||"Failed to fetch focus quality metrics");e({focusQualityMetrics:r.data,isLoadingFocusQuality:!1})}catch(r){e({focusQualityError:r instanceof Error?r.message:"Unknown error",isLoadingFocusQuality:!1})}},fetchComparativeAnalysis:async t=>{const{startDate:a,endDate:r}=s();e({isLoadingComparative:!0,comparativeError:null});try{const s=await fetch(`/api/analytics/comparative?type=${t}&startDate=${a}&endDate=${r}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const i=await s.json();if(!i.success)throw new Error(i.error?.message||"Failed to fetch comparative analysis");e({comparativeAnalysis:i.data,isLoadingComparative:!1})}catch(i){e({comparativeError:i instanceof Error?i.message:"Unknown error",isLoadingComparative:!1})}}})),G=({data:t,totalTime:d,isLoading:n,error:c,trendData:o=[]})=>{const[x,m]=e.useState("pie"),g=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},h=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.categoryName}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Time: ",g(e.totalTime)]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Percentage: ",e.percentage.toFixed(1),"%"]})]})}return null};return n?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Time Distribution"})}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):c?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Time Distribution"})}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading data"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c})]})})]}):0===t.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Time Distribution"})}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete some focus sessions to see your time distribution"})]})})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Time Distribution"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total time: ",g(d)]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>m("pie"),className:"p-2 rounded-lg transition-colors "+("pie"===x?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),title:"Pie Chart",children:s.jsx(a,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>m("bar"),className:"p-2 rounded-lg transition-colors "+("bar"===x?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),title:"Bar Chart",children:s.jsx(r,{className:"w-5 h-5"})}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>m("line"),className:"p-2 rounded-lg transition-colors "+("line"===x?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),title:"Line Chart (Trends)",children:s.jsx(i,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>m("area"),className:"p-2 rounded-lg transition-colors "+("area"===x?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),title:"Area Chart (Trends)",children:s.jsx(l,{className:"w-5 h-5"})})]})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(D,{width:"100%",height:"100%",children:"pie"===x?s.jsxs(S,{children:[s.jsx(T,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({categoryName:e,percentage:s})=>s>5?`${e} (${s.toFixed(1)}%)`:"",outerRadius:80,fill:"#8884d8",dataKey:"totalTime",children:t.map((e,t)=>s.jsx(L,{fill:e.color},`cell-${t}`))}),s.jsx($,{content:s.jsx(h,{})})]}):"bar"===x?s.jsxs(F,{data:t,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"categoryName",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>g(e)}),s.jsx($,{content:s.jsx(h,{})}),s.jsx(P,{dataKey:"totalTime",radius:[4,4,0,0],children:t.map((e,t)=>s.jsx(L,{fill:e.color},`cell-${t}`))})]}):"line"===x?s.jsxs(M,{data:o,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>g(e)}),s.jsx($,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,s)=>[g(e),s]}),s.jsx(R,{}),t.map((e,t)=>s.jsx(Q,{type:"monotone",dataKey:e.categoryName,stroke:e.color,strokeWidth:2,dot:{r:4},connectNulls:!1},e.categoryName))]}):s.jsxs(H,{data:o,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>g(e)}),s.jsx($,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,s)=>[g(e),s]}),s.jsx(R,{}),t.map((e,t)=>s.jsx(W,{type:"monotone",dataKey:e.categoryName,stackId:"1",stroke:e.color,fill:e.color,fillOpacity:.6},e.categoryName))]})})}),s.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:t.map((e,t)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.categoryName,": ",g(e.totalTime)," (",e.percentage.toFixed(1),"%)"]})]},t))})]})},K=({startDate:t,endDate:a,onDateRangeChange:r,onRefresh:i,isLoading:l})=>{const[x,m]=e.useState(null),[g,h]=e.useState(!1),y=(e,s)=>{const t=new Date(e),a=new Date(s),r=new Date;if(r.setHours(23,59,59,999),t>a)return"Start date must be before end date";if(a>r)return"End date cannot be in the future";const i=Math.abs(a.getTime()-t.getTime());return Math.ceil(i/864e5)>365?"Date range cannot exceed 365 days":null};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(d,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Analytics Period"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"From:"}),s.jsx("input",{type:"date",value:t,onChange:e=>{const s=e.target.value,t=y(s,a);m(t),t||r(s,a)},className:"px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm focus:ring-2 focus:border-transparent "+(x?"border-red-300 dark:border-red-600 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"),max:a})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"To:"}),s.jsx("input",{type:"date",value:a,onChange:e=>{const s=e.target.value,a=y(t,s);m(a),a||r(t,s)},className:"px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm focus:ring-2 focus:border-transparent "+(x?"border-red-300 dark:border-red-600 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"),min:t,max:(new Date).toISOString().split("T")[0]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>h(!g),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[s.jsx(d,{className:"w-4 h-4"}),s.jsx("span",{children:"Presets"}),s.jsx(n,{className:"w-4 h-4 transition-transform "+(g?"rotate-180":"")})]}),s.jsx("button",{onClick:i,disabled:l||!!x,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:l?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):x?s.jsxs(s.Fragment,{children:[s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{children:"Invalid"})]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4"}),s.jsx("span",{children:"Update"})]})})]})]})]}),x&&s.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(c,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:x})]})}),g&&s.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Recent periods:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Last 7 days",days:7},{label:"Last 14 days",days:14},{label:"Last 30 days",days:30},{label:"Last 90 days",days:90}].map((e,t)=>s.jsx("button",{onClick:()=>(e=>{const s=new Date,t=new Date;t.setDate(t.getDate()-e);const a=t.toISOString().split("T")[0],i=s.toISOString().split("T")[0],l=y(a,i);m(l),l||(r(a,i),h(!1))})(e.days),className:"px-3 py-1 text-xs bg-white dark:bg-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-gray-700 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-200 dark:border-gray-500 rounded-full transition-colors",children:e.label},t))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Current periods:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"This week",type:"week"},{label:"This month",type:"month"},{label:"This quarter",type:"quarter"},{label:"This year",type:"year"}].map((e,t)=>s.jsx("button",{onClick:()=>(e=>{const s=new Date,t=new Date;switch(e){case"week":t.setDate(t.getDate()-t.getDay());break;case"month":t.setDate(1);break;case"quarter":const e=Math.floor(t.getMonth()/3);t.setMonth(3*e,1);break;case"year":t.setMonth(0,1)}const a=t.toISOString().split("T")[0],i=s.toISOString().split("T")[0],l=y(a,i);m(l),l||(r(a,i),h(!1))})(e.type),className:"px-3 py-1 text-xs bg-white dark:bg-gray-600 hover:bg-green-50 dark:hover:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:text-green-700 dark:hover:text-green-300 border border-gray-200 dark:border-gray-500 rounded-full transition-colors",children:e.label},t))})]})]})}),s.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:["Showing data from ",new Date(t).toLocaleDateString()," to ",new Date(a).toLocaleDateString(),(()=>{const e=new Date(t),s=new Date(a),r=Math.abs(s.getTime()-e.getTime()),i=Math.ceil(r/864e5);return` (${i} day${1!==i?"s":""})`})()]})]})},B=({onExport:t,startDate:a,endDate:r})=>{const[i,l]=e.useState(!1),[d,y]=e.useState("idle"),[u,j]=e.useState(!1),[p,b]=e.useState("json"),N=[{value:"json",label:"JSON",description:"Structured data format",icon:m,extension:".json"},{value:"csv",label:"CSV",description:"Spreadsheet compatible",icon:g,extension:".csv"}];return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(x,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Export Analytics"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Download your analytics data in ",p.toUpperCase()," format"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>j(!u),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[s.jsx("span",{children:p.toUpperCase()}),s.jsx(n,{className:"w-4 h-4 transition-transform "+(u?"rotate-180":"")})]}),u&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10",children:N.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>{b(e.value),j(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center space-x-3 "+(p===e.value?"bg-blue-50 dark:bg-blue-900/20":""),children:[s.jsx(t,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]})]},e.value)})})]}),s.jsx("button",{onClick:()=>(async(e=p)=>{l(!0),y("idle"),j(!1);try{await t(e),y("success"),setTimeout(()=>{y("idle")},3e3)}catch(s){y("error"),setTimeout(()=>{y("idle")},5e3)}finally{l(!1)}})(),disabled:i,className:(()=>{const e="px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed";return"success"===d?`${e} bg-green-600 hover:bg-green-700 text-white`:"error"===d?`${e} bg-red-600 hover:bg-red-700 text-white`:`${e} bg-gray-600 hover:bg-gray-700 text-white`})(),children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Exporting..."})]}):"success"===d?s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4"}),s.jsx("span",{children:"Exported!"})]}):"error"===d?s.jsxs(s.Fragment,{children:[s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Failed"})]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]})})]})]}),s.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"Export will include:"}),s.jsxs("ul",{className:"mt-1 ml-4 list-disc space-y-1",children:[s.jsxs("li",{children:["Session data from ",new Date(a).toLocaleDateString()," to ",new Date(r).toLocaleDateString()]}),s.jsx("li",{children:"Time distribution by categories"}),s.jsx("li",{children:"Productivity patterns and statistics"}),s.jsx("li",{children:"Category information and goals"}),s.jsx("li",{children:"Daily and weekly aggregations"}),s.jsx("li",{children:"Focus quality metrics"})]})]}),"error"===d&&s.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(c,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Failed to export data. Please try again."})]})}),"success"===d&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Analytics data exported successfully! Check your downloads folder."})]})})]})},O=({data:e,isLoading:t,error:a})=>{const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=Array.from({length:24},(e,s)=>s),n=new Map;e.forEach(e=>{const s=`${e.dayOfWeek}-${e.hour}`;n.set(s,e)});const c=Math.max(...e.map(e=>e.focusScore),1),o=Math.max(...e.map(e=>e.sessionCount),1),x=(e,s)=>{const t=`${e}-${s}`,a=n.get(t);return a&&0!==a.sessionCount?`${r[e]} ${s}:00\nSessions: ${a.sessionCount}\nAvg Focus Time: ${(e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`})(a.averageFocusTime)}\nFocus Score: ${a.focusScore.toFixed(1)}/100`:`${r[e]} ${s}:00 - No sessions`};return t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(l,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Heatmap"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(l,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Heatmap"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading heatmap"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a})]})})]}):0===e.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(l,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Heatmap"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No productivity data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete more focus sessions to see your productivity patterns"})]})})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(l,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Heatmap"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your focus patterns by day and time"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Less"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-gray-100 dark:bg-gray-800"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-100 dark:bg-blue-900"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-200 dark:bg-blue-800"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-300 dark:bg-blue-700"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-400 dark:bg-blue-600"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 dark:bg-blue-500"})]}),s.jsx("span",{children:"More"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-full",children:[s.jsxs("div",{className:"flex mb-2",children:[s.jsx("div",{className:"w-12"})," ",d.map(e=>s.jsx("div",{className:"w-6 text-xs text-gray-500 dark:text-gray-400 text-center",children:e%6==0?e:""},e))]}),r.map((e,t)=>s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("div",{className:"w-12 text-xs text-gray-600 dark:text-gray-400 text-right pr-2",children:e}),d.map(e=>{const a=((e,s)=>{const t=`${e}-${s}`,a=n.get(t);return a&&0!==a.sessionCount?a.focusScore/c*.7+a.sessionCount/o*.3:0})(t,e),r=(e=>0===e?"bg-gray-100 dark:bg-gray-800":e<.2?"bg-blue-100 dark:bg-blue-900":e<.4?"bg-blue-200 dark:bg-blue-800":e<.6?"bg-blue-300 dark:bg-blue-700":e<.8?"bg-blue-400 dark:bg-blue-600":"bg-blue-500 dark:bg-blue-500")(a);return s.jsx("div",{className:`w-6 h-4 ${r} border border-gray-200 dark:border-gray-700 cursor-pointer hover:ring-2 hover:ring-blue-300 dark:hover:ring-blue-600 transition-all`,title:x(t,e)},e)})]},t))]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-500 dark:text-gray-400 mb-1",children:[s.jsx(y,{className:"w-4 h-4"}),s.jsx("span",{children:"Peak Hours"})]}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.filter(e=>e.sessionCount>0).sort((e,s)=>s.focusScore-e.focusScore).slice(0,2).map(e=>`${e.hour}:00`).join(", ")||"N/A"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-500 dark:text-gray-400 mb-1",children:[s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{children:"Best Day"})]}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:(()=>{const s=r.map((s,t)=>{const a=e.filter(e=>e.dayOfWeek===t),i=a.length>0?a.reduce((e,s)=>e+s.focusScore,0)/a.length:0;return{day:r[t],score:i}}).sort((e,s)=>s.score-e.score)[0];return s?.score>0?s.day:"N/A"})()})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-500 dark:text-gray-400 mb-1",children:[s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{children:"Total Sessions"})]}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.reduce((e,s)=>e+s.sessionCount,0)})]})]})]})},I=({data:e,isLoading:t,error:a})=>{const r=e=>{const s=Math.floor(e/60),t=Math.round(e%60);return s>0?`${s}h ${t}m`:`${t}m`},l=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Sessions: ",e.count]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Avg Quality: ",e.averageQuality.toFixed(1),"/5"]})]})}return null};return t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(y,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Length Analysis"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(y,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Length Analysis"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading analysis"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a})]})})]}):e&&0!==e.sessionLengthDistribution.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(y,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Length Analysis"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Optimize your session duration for better focus"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(i,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Average Length"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:r(e.averageSessionLength)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(u,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Optimal Length"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:r(e.optimalSessionLength)})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Session Length Distribution"}),s.jsx("div",{className:"h-48",children:s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(F,{data:e.sessionLengthDistribution,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"durationRange",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),s.jsx(A,{tick:{fontSize:12},label:{value:"Sessions",angle:-90,position:"insideLeft"}}),s.jsx($,{content:s.jsx(l,{})}),s.jsx(P,{dataKey:"count",radius:[4,4,0,0],children:e.sessionLengthDistribution.map((e,t)=>{return s.jsx(L,{fill:(a=e.averageQuality,a>=4?"#10B981":a>=3.5?"#F59E0B":a>=3?"#EF4444":"#6B7280")},`cell-${t}`);var a})})]})})}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-3 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Low Quality (<3)"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Good Quality (3-4)"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"High Quality (4+)"})]})]})]}),e.recommendations.length>0&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(j,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),s.jsx("h4",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-100",children:"Recommendations"})]}),s.jsx("ul",{className:"space-y-2",children:e.recommendations.map((e,t)=>s.jsxs("li",{className:"text-sm text-yellow-800 dark:text-yellow-200 flex items-start space-x-2",children:[s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mt-1",children:"•"}),s.jsx("span",{children:e})]},t))})]})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(y,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Length Analysis"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No session data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete more focus sessions to see length analysis"})]})})]})},U=({data:e,isLoading:t,error:a,onApplySuggestion:r})=>{const i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=e=>e>=.8?"text-green-600 dark:text-green-400":e>=.6?"text-yellow-600 dark:text-yellow-400":e>=.4?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(j,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Suggestions"})]}),s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(j,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Suggestions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading suggestions"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a})]})]}):e?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(j,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Suggestions"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AI-powered recommendations based on your patterns"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 mb-6 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Recommended Duration"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(p,{className:`w-4 h-4 ${l(e.confidence)}`}),s.jsxs("span",{className:`text-sm font-medium ${l(e.confidence)}`,children:[(n=e.confidence,n>=.8?"High":n>=.6?"Medium":n>=.4?"Low":"Very Low")," Confidence"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100 mb-1",children:(e=>{const s=Math.floor(e/60),t=Math.round(e%60);return s>0?`${s}h ${t}m`:`${t}m`})(e.suggestedDuration)}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e.reason})]}),r&&s.jsxs("button",{onClick:()=>r(e.suggestedDuration),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[s.jsx("span",{children:"Apply"}),s.jsx(b,{className:"w-4 h-4"})]})]})]}),e.alternativeTimes.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(d,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-gray-100",children:"Better Times to Focus"})]}),s.jsx("div",{className:"space-y-2",children:e.alternativeTimes.map((e,t)=>{return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[i[e.dayOfWeek]," at ",(a=e.hour,`${0===a?12:a>12?a-12:a}:00 ${a>=12?"PM":"AM"}`)]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Productivity score: ",e.score.toFixed(1)]})]})]}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:5},(t,a)=>s.jsx(p,{className:"w-3 h-3 "+(a<Math.round(e.score/20)?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600")},a))})]},t);var a})}),s.jsx("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:s.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:"💡 These times show higher productivity based on your historical data. Consider scheduling important work during these periods."})})]})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(j,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Session Suggestions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No suggestions available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete more sessions to get personalized recommendations"})]})]});var n},q=({data:t,isLoading:a,error:r,startDate:l,endDate:d})=>{const[c,o]=e.useState("weekly"),[m,g]=e.useState(!0),h=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},j=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),p=e=>{switch(e){case"increasing":case"improving":return s.jsx(i,{className:"w-4 h-4 text-green-500"});case"decreasing":case"declining":return s.jsx(i,{className:"w-4 h-4 text-red-500 rotate-180"});default:return s.jsx(i,{className:"w-4 h-4 text-gray-500"})}},b=e=>{switch(e){case"increasing":case"improving":return"text-green-600 dark:text-green-400";case"decreasing":case"declining":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}};if(a)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(x,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Weekly & Monthly Reports"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]});if(r)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(x,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Weekly & Monthly Reports"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading reports"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]});if(!t||0===t.weeklyReports.length&&0===t.monthlyReports.length)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(x,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Weekly & Monthly Reports"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No report data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete more sessions to generate comprehensive reports"})]})]});const k="weekly"===c?t.weeklyReports:t.monthlyReports;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(x,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Reports"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Comprehensive analysis of your focus patterns and progress"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>o("weekly"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("weekly"===c?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Weekly"}),s.jsx("button",{onClick:()=>o("monthly"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("monthly"===c?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Monthly"})]}),s.jsxs("button",{onClick:()=>g(!m),className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors",children:[s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{children:"Trends"}),s.jsx(n,{className:"w-4 h-4 transition-transform "+(m?"rotate-180":"")})]})]})]}),m&&t.trendAnalysis&&s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("h4",{className:"text-md font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Trend Analysis"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[p(t.trendAnalysis.focusTimeTrend),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Focus Time"}),s.jsx("p",{className:`text-sm capitalize ${b(t.trendAnalysis.focusTimeTrend)}`,children:t.trendAnalysis.focusTimeTrend})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[p(t.trendAnalysis.sessionQualityTrend),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Session Quality"}),s.jsx("p",{className:`text-sm capitalize ${b(t.trendAnalysis.sessionQualityTrend)}`,children:t.trendAnalysis.sessionQualityTrend})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(N,{className:"w-4 h-4 text-purple-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Consistency Score"}),s.jsxs("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:[t.trendAnalysis.consistencyScore.toFixed(1),"/100"]})]})]})]}),t.trendAnalysis.recommendations.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Recommendations:"}),s.jsx("ul",{className:"space-y-1",children:t.trendAnalysis.recommendations.map((e,t)=>s.jsxs("li",{className:"text-sm text-blue-800 dark:text-blue-200 flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"•"}),s.jsx("span",{children:e})]},t))})]})]}),s.jsx("div",{className:"h-64 mb-6",children:s.jsx(D,{width:"100%",height:"100%",children:"weekly"===c?s.jsxs(F,{data:t.weeklyReports,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"weekStart",tick:{fontSize:12},tickFormatter:e=>j(e)}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>h(e)}),s.jsx($,{labelFormatter:e=>`Week of ${j(e)}`,formatter:(e,s)=>"totalFocusTime"===s?[h(e),"Focus Time"]:"focusScore"===s?[`${e.toFixed(1)}/100`,"Focus Score"]:[e,s]}),s.jsx(R,{}),s.jsx(P,{dataKey:"totalFocusTime",fill:"#3B82F6",name:"Focus Time",radius:[4,4,0,0]}),s.jsx(P,{dataKey:"focusScore",fill:"#10B981",name:"Focus Score",radius:[4,4,0,0]})]}):s.jsxs(M,{data:t.monthlyReports,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"month",tick:{fontSize:12}}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>h(e)}),s.jsx($,{formatter:(e,s)=>"totalFocusTime"===s?[h(e),"Focus Time"]:"focusScore"===s?[`${e.toFixed(1)}/100`,"Focus Score"]:[e,s]}),s.jsx(R,{}),s.jsx(Q,{type:"monotone",dataKey:"totalFocusTime",stroke:"#3B82F6",strokeWidth:3,dot:{r:6},name:"Focus Time"}),s.jsx(Q,{type:"monotone",dataKey:"focusScore",stroke:"#10B981",strokeWidth:3,dot:{r:6},name:"Focus Score"})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"weekly"===c?`Week ${j(e.weekStart)}`:`${e.month} ${e.year}`}),"weekly"===c&&s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j(e.weekStart)," - ",j(e.weekEnd)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:h(e.totalFocusTime)}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Focus Time"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(y,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sessions"})]}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.sessionsCompleted})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(i,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Length"})]}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:h(e.averageSessionLength)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(N,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Focus Score"})]}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.focusScore.toFixed(1),"/100"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(u,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Goals"})]}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.goalsAchieved,"/",e.totalGoals]})]}),s.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Top Category: ",s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.topCategory})]})})]})]},t))})]})},V=({data:e,isLoading:t,error:a})=>{const r=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},l=e=>e>=4.5?"#10B981":e>=3.5?"#F59E0B":e>=2.5?"#EF4444":"#6B7280",d=e=>e>=4.5?"Excellent":e>=3.5?"Good":e>=2.5?"Fair":"Poor",n=({active:e,payload:t,label:a})=>e&&t&&t.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a}),t.map((e,t)=>s.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",e.value]},t))]}):null;return t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(k,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Focus Quality Metrics"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(k,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Focus Quality Metrics"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading metrics"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a})]})]}):e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(k,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Focus Quality Metrics"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Deep analysis of your focus quality and session effectiveness"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Deep Work %"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[e.deepWorkPercentage.toFixed(1),"%"]}),s.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Sessions ≥45min"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(N,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Avg Quality"})]}),s.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[e.averageQualityRating.toFixed(1),"/5"]}),s.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:d(e.averageQualityRating)})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(i,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Consistency"})]}),s.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[e.focusMetrics.consistencyScore.toFixed(0),"/100"]}),s.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:"Score"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(c,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsx("span",{className:"text-sm font-medium text-orange-900 dark:text-orange-100",children:"Interruptions"})]}),s.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:e.interruptionAnalysis.averageInterruptions.toFixed(1)}),s.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Per session"})]})]}),s.jsxs("div",{className:"h-64",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Quality Trends Over Time"}),s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(M,{data:e.qualityTrends,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx(A,{tick:{fontSize:12},domain:[0,5]}),s.jsx($,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,s)=>"averageQuality"===s?[`${e.toFixed(1)}/5`,"Quality Rating"]:"deepWorkTime"===s?[r(e),"Deep Work Time"]:[e,s]}),s.jsx(Q,{type:"monotone",dataKey:"averageQuality",stroke:"#10B981",strokeWidth:3,dot:{r:4},name:"Quality Rating"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Quality Rating Distribution"}),s.jsx("div",{className:"h-48 mb-4",children:s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(F,{data:e.qualityDistribution,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"rating",tick:{fontSize:12},tickFormatter:e=>`${e}★`}),s.jsx(A,{tick:{fontSize:12}}),s.jsx($,{content:s.jsx(n,{})}),s.jsx(P,{dataKey:"count",radius:[4,4,0,0],children:e.qualityDistribution.map((e,t)=>s.jsx(L,{fill:l(e.rating)},`cell-${t}`))})]})})}),s.jsx("div",{className:"space-y-2",children:e.qualityDistribution.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l(e.rating)}}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.rating,"★ (",d(e.rating),")"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[e.count," sessions"]}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",e.percentage.toFixed(1),"%)"]})]})]},t))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Quality by Session Type"}),s.jsx("div",{className:"h-48 mb-4",children:s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(S,{children:[s.jsx(T,{data:e.sessionTypeBreakdown,cx:"50%",cy:"50%",labelLine:!1,label:({type:e,averageQuality:s})=>`${e} (${s.toFixed(1)}★)`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:e.sessionTypeBreakdown.map((e,t)=>s.jsx(L,{fill:e.color},`cell-${t}`))}),s.jsx($,{formatter:(e,s,t)=>[`${e} sessions (${r(t.payload.totalTime)})`,`${t.payload.type} - Avg Quality: ${t.payload.averageQuality.toFixed(1)}★`]})]})})}),s.jsx("div",{className:"space-y-2",children:e.sessionTypeBreakdown.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:e.type.replace("_"," ")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[e.averageQuality.toFixed(1),"★"]}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",e.count," sessions)"]})]})]},t))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Focus Quality Insights"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Quality Predictors"}),s.jsx("ul",{className:"space-y-2",children:e.focusMetrics.qualityPredictors.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start space-x-2",children:[s.jsx("span",{className:"text-green-500 mt-1",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Interruption Analysis"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quality Impact:"}),s.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["-",e.interruptionAnalysis.interruptionImpact.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Peak Interruption Time:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.interruptionAnalysis.commonInterruptionTimes.length>0?`${e.interruptionAnalysis.commonInterruptionTimes[0].hour}:00`:"N/A"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Optimal Session Length:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:r(e.focusMetrics.optimalSessionLength)})]})]})]})]})]})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(k,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Focus Quality Metrics"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No quality data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Complete more sessions with quality ratings to see metrics"})]})]})},Y=({data:t,isLoading:a,error:r,comparisonType:l,onComparisonTypeChange:d})=>{const[n,c]=e.useState("focusTime"),o=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},x=(e,s=!1)=>{const t=Math.abs(e),a=s?o(t):t.toFixed(1);return e>=0?`+${a}`:`-${a}`},m=(e,t="w-4 h-4")=>{switch(e){case"up":return s.jsx(w,{className:`${t} text-green-500`});case"down":return s.jsx(v,{className:`${t} text-red-500`});default:return s.jsx(f,{className:`${t} text-gray-500`})}},g=e=>e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",h=({active:e,payload:t,label:a})=>e&&t&&t.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a}),t.map((e,t)=>s.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",e.dataKey.includes("Time")||e.dataKey.includes("focusTime")?o(e.value):e.value]},t))]}):null;if(a)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(i,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comparative Analysis"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]});if(r)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(i,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comparative Analysis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading comparison"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]});if(!t)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(i,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comparative Analysis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No comparison data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Need at least 2 weeks of data to show comparisons"})]})]});const y="week"===l?t.weekOverWeek:t.monthOverMonth;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(i,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comparative Analysis"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track your progress with period-over-period comparisons"})]})]}),s.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>d("week"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("week"===l?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Week over Week"}),s.jsx("button",{onClick:()=>d("month"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("month"===l?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Month over Month"})]})]}),t.trendAnalysis&&s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"text-md font-semibold text-indigo-900 dark:text-indigo-100",children:["Overall Trend: ",t.trendAnalysis.overallTrend.charAt(0).toUpperCase()+t.trendAnalysis.overallTrend.slice(1)]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[m("improving"===t.trendAnalysis.overallTrend?"up":"declining"===t.trendAnalysis.overallTrend?"down":"stable","w-5 h-5"),s.jsxs("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:["Consistency: ",t.trendAnalysis.consistencyRating.toFixed(0),"/100"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-200",children:[s.jsx("span",{className:"font-medium",children:"Strongest Improvement:"})," ",t.trendAnalysis.strongestImprovement]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-200",children:[s.jsx("span",{className:"font-medium",children:"Biggest Decline:"})," ",t.trendAnalysis.biggestDecline]})})]}),t.trendAnalysis.recommendations.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-indigo-900 dark:text-indigo-100 mb-2",children:"Recommendations:"}),s.jsx("ul",{className:"space-y-1",children:t.trendAnalysis.recommendations.map((e,t)=>s.jsxs("li",{className:"text-sm text-indigo-800 dark:text-indigo-200 flex items-start space-x-2",children:[s.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 mt-1",children:"•"}),s.jsx("span",{children:e})]},t))})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(F,{data:t.periodComparison,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"period",tick:{fontSize:12}}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>"focusTime"===n?o(e):e}),s.jsx($,{content:s.jsx(h,{})}),s.jsx(R,{}),s.jsx(P,{dataKey:n,fill:"#3B82F6",radius:[4,4,0,0],name:"focusTime"===n?"Focus Time":"sessions"===n?"Sessions":"averageQuality"===n?"Avg Quality":"goalsAchieved"===n?"Goals Achieved":"Focus Score"})]})})}),s.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{key:"focusTime",label:"Focus Time"},{key:"sessions",label:"Sessions"},{key:"averageQuality",label:"Quality"},{key:"goalsAchieved",label:"Goals"},{key:"focusScore",label:"Score"}].map(e=>s.jsx("button",{onClick:()=>c(e.key),className:"px-3 py-1 text-xs font-medium rounded-full transition-colors "+(n===e.key?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.label},e.key))})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 capitalize",children:e.metric.replace(/([A-Z])/g," $1").trim()}),m(e.trend)]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current ",l,":"]}),s.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.metric.toLowerCase().includes("time")?o(e.currentWeek||e.currentMonth):(e.currentWeek||e.currentMonth).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Previous ",l,":"]}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.metric.toLowerCase().includes("time")?o(e.previousWeek||e.previousMonth):(e.previousWeek||e.previousMonth).toFixed(1)})]}),s.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Change:"}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`text-sm font-bold ${g(e.change)}`,children:x(e.change,e.metric.toLowerCase().includes("time"))}),s.jsxs("span",{className:`text-xs ml-2 ${g(e.changePercentage)}`,children:["(",e.changePercentage>=0?"+":"",e.changePercentage.toFixed(1),"%)"]})]})]})})]})]},t))}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["week"===l?"Weekly":"Monthly"," Progress Timeline"]}),s.jsx("div",{className:"h-64",children:s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(H,{data:t.periodComparison,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"period",tick:{fontSize:12}}),s.jsx(A,{tick:{fontSize:12},tickFormatter:e=>o(e)}),s.jsx($,{content:s.jsx(h,{})}),s.jsx(W,{type:"monotone",dataKey:"focusTime",stackId:"1",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.6,name:"Focus Time"})]})})})]})]})},J=({data:t,isLoading:a,error:r})=>{const[l,d]=e.useState("goals"),n=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},c=e=>{switch(e){case"up":return s.jsx(i,{className:"w-4 h-4 text-green-500"});case"down":return s.jsx(i,{className:"w-4 h-4 text-red-500 rotate-180"});default:return s.jsx(i,{className:"w-4 h-4 text-gray-500"})}},x=e=>{switch(e){case"legendary":return"from-yellow-400 to-orange-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}},m=e=>{switch(e){case"legendary":return"border-yellow-400";case"epic":return"border-purple-400";case"rare":return"border-blue-400";default:return"border-gray-400"}};return a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(u,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Goal Progress & Milestones"})]}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):r?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(u,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Goal Progress & Milestones"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading goal progress"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(u,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Goal Progress & Milestones"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track your progress toward weekly goals and long-term milestones"})]})]}),s.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>d("goals"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("goals"===l?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Goals"}),s.jsx("button",{onClick:()=>d("milestones"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("milestones"===l?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Milestones"}),s.jsx("button",{onClick:()=>d("achievements"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+("achievements"===l?"bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:"Achievements"})]})]}),"goals"===l&&s.jsxs("div",{className:"h-64 mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Weekly Goal Completion Rate"}),s.jsx(D,{width:"100%",height:"100%",children:s.jsxs(M,{data:t.weeklyProgress,children:[s.jsx(C,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(E,{dataKey:"week",tick:{fontSize:12}}),s.jsx(A,{tick:{fontSize:12},domain:[0,100],tickFormatter:e=>`${e}%`}),s.jsx($,{formatter:(e,s)=>"completionRate"===s?[`${e.toFixed(1)}%`,"Completion Rate"]:"totalTime"===s?[n(e),"Total Time"]:[e,s]}),s.jsx(R,{}),s.jsx(Q,{type:"monotone",dataKey:"completionRate",stroke:"#10B981",strokeWidth:3,dot:{r:6},name:"Completion Rate"})]})})]})]}),"goals"===l&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.categoryGoals.map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.categoryColor}}),s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.categoryName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[c(e.trend),e.isCompleted&&s.jsx(o,{className:"w-5 h-5 text-green-500"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progress"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[n(e.currentProgress)," / ",n(e.weeklyGoal)]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"h-3 rounded-full transition-all duration-300 "+(e.isCompleted?"bg-green-500":e.percentage>75?"bg-yellow-500":"bg-blue-500"),style:{width:`${Math.min(e.percentage,100)}%`}})}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.percentage.toFixed(1),"% complete"]}),e.isCompleted&&s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"✓ Goal achieved!"})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Streak:"}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[e.streak," weeks"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Best Week:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:n(e.bestWeek)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Average:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:n(e.averageWeekly)})]})]})]},t))}),"milestones"===l&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.milestones.map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border-l-4 "+(e.isCompleted?"border-green-500":"border-blue-500"),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-2 rounded-lg "+(e.isCompleted?"bg-green-100 dark:bg-green-900/20":"bg-blue-100 dark:bg-blue-900/20"),children:e.isCompleted?s.jsx(o,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):s.jsx(u,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]}),!e.isCompleted&&e.daysRemaining&&s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:[e.daysRemaining," days left"]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progress"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.currentValue," / ",e.targetValue," ",e.unit]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.isCompleted?"bg-green-500":"bg-blue-500"),style:{width:`${Math.min(e.currentValue/e.targetValue*100,100)}%`}})})]}),e.isCompleted&&e.completedDate&&s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["🎉 Completed on ",new Date(e.completedDate).toLocaleDateString()]})})]},t))}),"achievements"===l&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.achievements.map((e,t)=>s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border-2 ${m(e.rarity)}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${x(e.rarity)}`,children:s.jsx(N,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full font-medium capitalize "+("legendary"===e.rarity?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"epic"===e.rarity?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300":"rare"===e.rarity?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:e.rarity})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e.category}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.earnedDate).toLocaleDateString()})]})]},t))})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(u,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Goal Progress & Milestones"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No goal data available"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Set up weekly goals for your categories to track progress"})]})]})},X=()=>{const{timeDistribution:t,totalTime:a,timeDistributionTrends:l,productivityPatterns:n,sessionLengthAnalysis:c,productivityHeatmap:o,sessionSuggestions:x,goalProgress:m,weeklyMonthlyReports:g,focusQualityMetrics:h,comparativeAnalysis:y,startDate:j,endDate:p,isLoadingTimeDistribution:b,isLoadingProductivityPatterns:N,isLoadingSessionLengthAnalysis:k,isLoadingProductivityHeatmap:f,isLoadingSessionSuggestions:v,isLoadingGoalProgress:w,isLoadingReports:D,isLoadingFocusQuality:S,isLoadingComparative:T,timeDistributionError:L,productivityPatternsError:$,sessionLengthAnalysisError:F,productivityHeatmapError:C,sessionSuggestionsError:E,goalProgressError:A,reportsError:P,focusQualityError:M,comparativeError:R,setDateRange:Q,fetchAllAnalytics:H,exportAnalyticsData:W,fetchComparativeAnalysis:X,clearErrors:Z}=z();e.useEffect(()=>{Z(),H()},[Z,H]);const _=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h ${t}m`:`${t}m`},ee=b||N||k||f||v||w||D||S||T;return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(r,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Analytics Dashboard"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyze your productivity patterns and track your progress over time"})]}),s.jsx("div",{className:"mb-6",children:s.jsx(K,{startDate:j,endDate:p,onDateRangeChange:(e,s)=>{Q(e,s)},onRefresh:()=>{Z(),H()},isLoading:ee})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:s.jsx(d,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Focus Time"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:_(a)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:s.jsx(i,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Categories"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:s.jsx(u,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goals Completed"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[m.filter(e=>e.isCompleted).length,"/",m.length]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"xl:col-span-2",children:s.jsx(G,{data:t,totalTime:a,isLoading:b,error:L,trendData:l})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Goal Progress"}),w?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):A?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading goals"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A})]}):0===m.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No goals set"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Set weekly goals for your categories to track progress"})]}):s.jsx("div",{className:"space-y-4",children:m.map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.categoryName}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[_(e.currentProgress)," / ",_(e.weeklyGoal)]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.isCompleted?"bg-green-500":e.percentage>75?"bg-yellow-500":"bg-blue-500"),style:{width:`${Math.min(e.percentage,100)}%`}})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.percentage.toFixed(1),"% complete"]}),e.isCompleted&&s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"✓ Goal achieved!"})]})]},e.categoryId))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8",children:[s.jsx(I,{data:c,isLoading:k,error:F}),s.jsx(U,{data:x,isLoading:v,error:E})]}),s.jsx("div",{className:"mb-8",children:s.jsx(O,{data:o,isLoading:f,error:C})}),s.jsx("div",{className:"mb-8",children:s.jsx(q,{data:g,isLoading:D,error:P,startDate:j,endDate:p})}),s.jsx("div",{className:"mb-8",children:s.jsx(V,{data:h,isLoading:S,error:M})}),s.jsx("div",{className:"mb-8",children:s.jsx(Y,{data:y,isLoading:T,error:R,comparisonType:"week",onComparisonTypeChange:e=>X(e)})}),s.jsx("div",{className:"mb-8",children:s.jsx(J,{data:null,isLoading:!1,error:null})}),s.jsx("div",{className:"mt-8",children:s.jsx(B,{onExport:W,startDate:j,endDate:p})})]})})};export{X as default};
//# sourceMappingURL=Analytics-HQQf0lki.js.map
