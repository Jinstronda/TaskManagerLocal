import{r as e,j as r}from"./vendor-react-Gj0PPTzM.js";import{c as t,d as a}from"./vendor-state-Jewp0_hO.js";import{c as s,C as d,ac as l,m as n,ad as i,ae as o,X as c,u as g,i as x,Z as m,q as h,a as b,P as u,af as y,ag as k,Y as j,b as p,z as f,ah as N,t as v,ai as w,aj as S,ak as $,a2 as C}from"./icons-CSMXKUV2.js";import{u as T}from"./categoryStore-DGwHaERV.js";import{R as D,B as M,b as P,X as E,Y as A,T as F,c as G,C as I,L as W,e as L,P as U,a as O}from"./charts-KMioQ2Xn.js";import"./vendor-misc-CPs7ArQ_.js";import"./utils-BeLtu-UY.js";const z="/api/streaks",R=t()(a((e,r)=>({streakInfo:null,statistics:null,milestones:[],settings:null,loading:{streakInfo:!1,statistics:!1,milestones:!1,settings:!1,recovery:!1},error:null,fetchStreakInfo:async()=>{e(e=>({loading:{...e.loading,streakInfo:!0},error:null}));try{const r=await fetch(`${z}/current`);if(!r.ok)throw new Error("Failed to fetch streak info");const t=await r.json();t.gracePeriodEndsAt&&(t.gracePeriodEndsAt=new Date(t.gracePeriodEndsAt)),e(e=>({streakInfo:t,loading:{...e.loading,streakInfo:!1}}))}catch(r){e(e=>({error:r instanceof Error?r.message:"Unknown error",loading:{...e.loading,streakInfo:!1}}))}},fetchStatistics:async(r,t)=>{e(e=>({loading:{...e.loading,statistics:!0},error:null}));try{const a=await fetch(`${z}/statistics?startDate=${r}&endDate=${t}`);if(!a.ok)throw new Error("Failed to fetch streak statistics");const s=await a.json();e(e=>({statistics:s,loading:{...e.loading,statistics:!1}}))}catch(a){e(e=>({error:a instanceof Error?a.message:"Unknown error",loading:{...e.loading,statistics:!1}}))}},fetchMilestones:async()=>{e(e=>({loading:{...e.loading,milestones:!0},error:null}));try{const r=await fetch(`${z}/milestones`);if(!r.ok)throw new Error("Failed to fetch milestones");const t=await r.json();e(e=>({milestones:t,loading:{...e.loading,milestones:!1}}))}catch(r){e(e=>({error:r instanceof Error?r.message:"Unknown error",loading:{...e.loading,milestones:!1}}))}},fetchSettings:async()=>{e(e=>({loading:{...e.loading,settings:!0},error:null}));try{const r={minimumFocusTime:25,gracePeriodDays:1,streakRecoveryEnabled:!0};e(e=>({settings:r,loading:{...e.loading,settings:!1}}))}catch(r){e(e=>({error:r instanceof Error?r.message:"Unknown error",loading:{...e.loading,settings:!1}}))}},updateSettings:async r=>{e(e=>({loading:{...e.loading,settings:!0},error:null}));try{if(!(await fetch(`${z}/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to update streak settings");e(e=>({settings:e.settings?{...e.settings,...r}:null,loading:{...e.loading,settings:!1}}))}catch(t){e(e=>({error:t instanceof Error?t.message:"Unknown error",loading:{...e.loading,settings:!1}}))}},recoverStreak:async t=>{e(e=>({loading:{...e.loading,recovery:!0},error:null}));try{const a=await fetch(`${z}/recover`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:t})}),s=await a.json();return e(e=>({loading:{...e.loading,recovery:!1}})),s.success&&r().fetchStreakInfo(),s}catch(a){return e(e=>({error:a instanceof Error?a.message:"Unknown error",loading:{...e.loading,recovery:!1}})),{success:!1,message:"Failed to recover streak"}}},updateDailyStats:async t=>{try{if(!(await fetch(`${z}/update-daily/${t}`,{method:"POST"})).ok)throw new Error("Failed to update daily stats");r().fetchStreakInfo()}catch(a){e({error:a instanceof Error?a.message:"Unknown error"})}},clearError:()=>{e({error:null})}}),{name:"streak-store"})),K=({className:t="",showDetails:a=!0})=>{const{streakInfo:i,loading:o,error:c,fetchStreakInfo:g,recoverStreak:x,clearError:m}=R();e.useEffect(()=>{g()},[g]);if(o.streakInfo)return r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-1/3 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]});if(c)return r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(s,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Streak"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:c}),r.jsx("button",{onClick:()=>{m(),g()},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]});if(!i)return r.jsx("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(s,{className:"w-5 h-5"}),r.jsx("span",{children:"No streak data available"})]})});const h=e=>e>=30?"text-purple-600 dark:text-purple-400":e>=14?"text-blue-600 dark:text-blue-400":e>=7?"text-green-600 dark:text-green-400":e>=3?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400";return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Focus Streak"}),i.gracePeriodActive&&r.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 text-sm",children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{children:"Grace Period"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`${h(i.currentStreak)}`,children:(b=i.currentStreak,b>=30?r.jsx(l,{className:"w-6 h-6"}):r.jsx(n,{className:"w-6 h-6"}))}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:`text-3xl font-bold ${h(i.currentStreak)}`,children:i.currentStreak}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:1===i.currentStreak?"day":"days"})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Current streak"})]})]}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Longest streak"}),r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[i.longestStreak," ",1===i.longestStreak?"day":"days"]})]}),i.lastStreakDate&&r.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Last streak day"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(i.lastStreakDate).toLocaleDateString()})]}),i.gracePeriodActive&&i.gracePeriodEndsAt&&r.jsxs("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-300 mb-2",children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium text-sm",children:"Grace Period Active"})]}),r.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-xs mb-3",children:["Your streak is protected until ",i.gracePeriodEndsAt.toLocaleDateString(),". Complete a focus session to maintain your streak!"]}),r.jsx("button",{onClick:async()=>{if(!i?.gracePeriodActive)return;const e=new Date;e.setDate(e.getDate()-1);const r=e.toISOString().split("T")[0];try{(await x(r)).success}catch(t){}},disabled:o.recovery,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white text-sm font-medium py-2 px-3 rounded-md transition-colors",children:o.recovery?"Recovering...":"Recover Streak"})]}),0===i.currentStreak&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"ðŸŽ¯ Start your focus journey! Complete a 25-minute session to begin your streak."})}),i.currentStreak>0&&i.currentStreak<7&&r.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:r.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"ðŸ”¥ Great start! Keep going to reach your first week streak."})}),i.currentStreak>=7&&i.currentStreak<30&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"â­ Excellent consistency! You're building a strong habit."})}),i.currentStreak>=30&&r.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:r.jsx("p",{className:"text-purple-700 dark:text-purple-300 text-sm",children:"ðŸ† Incredible dedication! You're a focus master."})})]})]});var b},Y=({className:t="",daysToShow:a=30,showNavigation:d=!0})=>{const{streakInfo:l,fetchStreakInfo:n}=R(),[c,g]=e.useState(new Date);e.useEffect(()=>{n()},[n]);const x=((e,r)=>{const t=[];for(let a=r-1;a>=0;a--){const r=new Date(e);r.setDate(r.getDate()-a),t.push(r)}return t})(c,a),m=(new Date).toISOString().split("T")[0],h=e=>{const r=e.toISOString().split("T")[0];return l?.streakDates.includes(r)||!1},b=e=>(e=>e.toISOString().split("T")[0]>m)(e)?"future":(e=>e.toISOString().split("T")[0]===m)(e)?h(e)?"today-completed":"today-pending":h(e)?"completed":"missed",u=e=>{const r="w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs font-medium transition-all duration-200 hover:scale-110";switch(e){case"completed":return`${r} bg-green-500 border-green-500 text-white shadow-md`;case"today-completed":return`${r} bg-green-500 border-green-500 text-white shadow-lg ring-2 ring-green-300 dark:ring-green-600`;case"today-pending":return`${r} bg-yellow-100 dark:bg-yellow-900/30 border-yellow-400 text-yellow-700 dark:text-yellow-300 shadow-lg ring-2 ring-yellow-300 dark:ring-yellow-600 animate-pulse`;case"missed":return`${r} bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500`;case"future":return`${r} bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-300 dark:text-gray-600`;default:return r}},y=(e,r)=>{const t=e.toLocaleDateString();switch(r){case"completed":return`âœ… ${t} - Focus session completed`;case"today-completed":return`ðŸŽ‰ ${t} - Today's focus session completed!`;case"today-pending":return`â° ${t} - Complete a focus session today`;case"missed":return`âŒ ${t} - No focus session`;case"future":return`ðŸ“… ${t} - Future date`;default:return t}};return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(s,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Habit Chain"})]}),d&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{const e=new Date(c);e.setDate(e.getDate()-a),g(e)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Previous period",children:r.jsx(i,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("button",{onClick:()=>{g(new Date)},className:"px-3 py-1 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",children:"Today"}),r.jsx("button",{onClick:()=>{const e=new Date(c);e.setDate(e.getDate()+a),g(e)},disabled:c>=new Date,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Next period",children:r.jsx(o,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),r.jsx("div",{className:"text-center mb-4",children:r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x[0]?.toLocaleDateString()," - ",x[x.length-1]?.toLocaleDateString()]})}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["S","M","T","W","T","F","S"].map((e,t)=>r.jsx("div",{className:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:e},t)),Array.from({length:x[0]?.getDay()||0}).map((e,t)=>r.jsx("div",{className:"w-8 h-8"},`empty-${t}`)),x.map((e,t)=>{const a=b(e),s=e.getDate();return r.jsx("div",{className:u(a),title:y(e,a),children:s},t)})]}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completed"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Today"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300 dark:bg-gray-600"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Missed"})]})]}),l&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l.streakDates.length}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Days"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[Math.round(l.streakDates.length/a*100),"%"]}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Completion Rate"})]})]})})]})},B=({isOpen:t,onClose:a,onRecovered:s})=>{const{streakInfo:l,loading:n,recoverStreak:i}=R(),[o,m]=e.useState(!1),[h,b]=e.useState(null);if(!t||!l?.gracePeriodActive)return null;const u=l.gracePeriodEndsAt,y=u?Math.max(0,Math.ceil((u.getTime()-Date.now())/864e5)):0;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:r.jsx(d,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Streak Grace Period"})]}),r.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:r.jsx(c,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),r.jsx("div",{className:"p-6",children:h?r.jsx("div",{className:"text-center py-4",children:h.success?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-full w-fit mx-auto mb-4",children:r.jsx(x,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100 mb-2",children:"Streak Recovered!"}),r.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm mb-4",children:h.message}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Keep up the great work! Complete today's session to continue building your habit."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full w-fit mx-auto mb-4",children:r.jsx(g,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Recovery Failed"}),r.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm mb-4",children:h.message}),r.jsx("button",{onClick:()=>b(null),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:"Try Again"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 mb-3",children:[r.jsx(g,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Your streak is protected"})]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:["You missed yesterday's focus session, but your ",l.currentStreak,"-day streak is still safe! You have a grace period to recover it."]}),u&&r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium text-amber-800 dark:text-amber-200 mb-1",children:"Grace period ends:"}),r.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:(k=u,k.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),r.jsxs("div",{className:"text-amber-600 dark:text-amber-400 mt-1",children:["(",y," ",1===y?"day":"days"," remaining)"]})]})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"How to maintain your streak:"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Complete a focus session today to continue your streak"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Or use the recovery option below to acknowledge the missed day"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[r.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Streak Recovery"}),r.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm mb-3",children:"If you had a valid reason for missing yesterday (illness, emergency, etc.), you can recover your streak and continue building your habit."}),r.jsx("button",{onClick:async()=>{m(!0),b(null);try{const e=new Date;e.setDate(e.getDate()-1);const r=e.toISOString().split("T")[0],t=await i(r);b(t),t.success&&setTimeout(()=>{s?.(),a()},2e3)}catch(e){b({success:!1,message:"Failed to recover streak. Please try again."})}finally{m(!1)}},disabled:o||n.recovery,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors",children:o||n.recovery?"Recovering Streak...":"Recover My Streak"})]})]})}),!h&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 rounded-b-lg",children:r.jsx("div",{className:"flex justify-end gap-3",children:r.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Close"})})})]})});var k},H=({className:t="",showProgress:a=!0})=>{const{streakInfo:s,milestones:d,loading:n,error:i,fetchMilestones:o,fetchStreakInfo:c}=R();e.useEffect(()=>{o(),c()},[o,c]);const g=[{days:3,title:"Getting Started",icon:m,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"},{days:7,title:"One Week",icon:h,color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/30"},{days:14,title:"Two Weeks",icon:b,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/30"},{days:30,title:"One Month",icon:l,color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30"},{days:60,title:"Two Months",icon:l,color:"text-indigo-500",bgColor:"bg-indigo-100 dark:bg-indigo-900/30"},{days:90,title:"Three Months",icon:l,color:"text-pink-500",bgColor:"bg-pink-100 dark:bg-pink-900/30"},{days:180,title:"Six Months",icon:l,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/30"},{days:365,title:"One Year",icon:l,color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/30"}],x=s?.currentStreak||0,u=e=>x>=e?"completed":"upcoming",y=()=>g.find(e=>e.days>x);if(n.milestones||n.streakInfo)return r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3 mb-1"}),r.jsx("div",{className:"h-2 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]})]},e))})]});if(i)return r.jsx("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:i})});const k=y(),j=(()=>{const e=y();if(!e)return 100;const r=g.filter(e=>e.days<=x).pop(),t=r?.days||0,a=(x-t)/(e.days-t)*100;return Math.max(0,Math.min(100,a))})(),p=g.filter(e=>"completed"===u(e.days)),f=g.filter(e=>"upcoming"===u(e.days)).slice(0,3);return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(b,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Streak Milestones"})]}),k&&a&&r.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:`p-2 ${k.bgColor} rounded-full`,children:r.jsx(k.icon,{className:`w-5 h-5 ${k.color}`})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Next: ",k.title]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.days-x," days to go"]})]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsxs("span",{children:[x," days"]}),r.jsxs("span",{children:[k.days," days"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${j}%`}})})]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[Math.round(j),"% complete"]})]}),p.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["ðŸ† Achievements (",p.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:p.map(e=>r.jsxs("div",{className:`${e.bgColor} border border-gray-200 dark:border-gray-600 rounded-lg p-3 text-center`,children:[r.jsx(e.icon,{className:`w-6 h-6 ${e.color} mx-auto mb-1`}),r.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-white",children:e.title}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.days," days"]})]},e.days))})]}),f.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"ðŸŽ¯ Upcoming Goals"}),r.jsx("div",{className:"space-y-3",children:f.map((e,t)=>{const a=e.days-x,s=0===t;return r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border transition-all "+(s?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600"),children:[r.jsx("div",{className:`p-2 ${e.bgColor} rounded-full ${s?"ring-2 ring-blue-300 dark:ring-blue-600":""}`,children:r.jsx(e.icon,{className:`w-4 h-4 ${e.color}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.title}),r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.days," days"]})]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a," days to go"]})]})]},e.days)})})]}),0===x&&r.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:r.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 text-center",children:"ðŸŒŸ Start your journey! Complete your first focus session to unlock achievements."})}),x>0&&!k&&r.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:r.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 text-center",children:"ðŸŽ‰ Incredible! You've achieved all milestones. You're a true focus master!"})})]})},J="/api/weekly-goals",q=t()(a((e,r)=>({currentWeekProgress:null,weeklyProgress:new Map,achievements:[],goalsNeedingAttention:[],statistics:null,loading:{currentWeek:!1,weekProgress:!1,achievements:!1,attention:!1,statistics:!1,updateGoal:!1,celebration:!1},error:null,fetchCurrentWeekProgress:async()=>{e(e=>({loading:{...e.loading,currentWeek:!0},error:null}));try{const r=await fetch(`${J}/current`);if(!r.ok)throw new Error("Failed to fetch current week progress");const t=await r.json();e(e=>({currentWeekProgress:t,loading:{...e.loading,currentWeek:!1}}))}catch(r){e(e=>({error:r instanceof Error?r.message:"Unknown error",loading:{...e.loading,currentWeek:!1}}))}},fetchWeekProgress:async r=>{e(e=>({loading:{...e.loading,weekProgress:!0},error:null}));try{const t=await fetch(`${J}/week/${r}`);if(!t.ok)throw new Error("Failed to fetch week progress");const a=await t.json();e(e=>({weeklyProgress:new Map(e.weeklyProgress).set(a.weekStart,a),loading:{...e.loading,weekProgress:!1}}))}catch(t){e(e=>({error:t instanceof Error?t.message:"Unknown error",loading:{...e.loading,weekProgress:!1}}))}},updateCategoryGoal:async(t,a)=>{e(e=>({loading:{...e.loading,updateGoal:!0},error:null}));try{if(!(await fetch(`${J}/category/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetMinutes:a})})).ok)throw new Error("Failed to update category goal");await r().fetchCurrentWeekProgress(),e(e=>({loading:{...e.loading,updateGoal:!1}}))}catch(s){e(e=>({error:s instanceof Error?s.message:"Unknown error",loading:{...e.loading,updateGoal:!1}}))}},fetchAchievements:async(r,t)=>{e(e=>({loading:{...e.loading,achievements:!0},error:null}));try{const a=await fetch(`${J}/achievements?startDate=${r}&endDate=${t}`);if(!a.ok)throw new Error("Failed to fetch achievements");const s=(await a.json()).map(e=>({...e,achievedAt:new Date(e.achievedAt)}));e(e=>({achievements:s,loading:{...e.loading,achievements:!1}}))}catch(a){e(e=>({error:a instanceof Error?a.message:"Unknown error",loading:{...e.loading,achievements:!1}}))}},fetchGoalsNeedingAttention:async()=>{e(e=>({loading:{...e.loading,attention:!0},error:null}));try{const r=await fetch(`${J}/attention`);if(!r.ok)throw new Error("Failed to fetch goals needing attention");const t=await r.json();e(e=>({goalsNeedingAttention:t,loading:{...e.loading,attention:!1}}))}catch(r){e(e=>({error:r instanceof Error?r.message:"Unknown error",loading:{...e.loading,attention:!1}}))}},fetchStatistics:async(r=12)=>{e(e=>({loading:{...e.loading,statistics:!0},error:null}));try{const t=await fetch(`${J}/statistics?weeks=${r}`);if(!t.ok)throw new Error("Failed to fetch statistics");const a=await t.json();e(e=>({statistics:a,loading:{...e.loading,statistics:!1}}))}catch(t){e(e=>({error:t instanceof Error?t.message:"Unknown error",loading:{...e.loading,statistics:!1}}))}},celebrateAchievement:async(r,t)=>{e(e=>({loading:{...e.loading,celebration:!0},error:null}));try{const a=await fetch(`${J}/celebrate/${r}/${t}`,{method:"POST"});if(!a.ok)throw new Error("Failed to celebrate achievement");const s=await a.json();return e(e=>({loading:{...e.loading,celebration:!1}})),{message:s.message,milestone:s.milestone}}catch(a){return e(e=>({error:a instanceof Error?a.message:"Unknown error",loading:{...e.loading,celebration:!1}})),{message:"Failed to celebrate achievement"}}},clearError:()=>{e({error:null})}}),{name:"weekly-goals-store"})),Q=({className:t=""})=>{const{currentWeekProgress:a,loading:s,error:d,fetchCurrentWeekProgress:l,updateCategoryGoal:n,clearError:i}=q(),{categories:o,fetchCategories:g}=T(),[x,m]=e.useState(null),[h,p]=e.useState(""),[f,N]=e.useState(!1),[v,w]=e.useState(null),[S,$]=e.useState("");e.useEffect(()=>{l(),g()},[l,g]);const C=()=>{m(null),p("")},D=e=>{const r=Math.floor(e/60),t=e%60;return r>0?`${r}h ${t}m`:`${t}m`},M=e=>e>=100?"bg-green-500":e>=75?"bg-blue-500":e>=50?"bg-yellow-500":"bg-gray-400",P=()=>{const e=a?.goals.map(e=>e.categoryId)||[];return o.filter(r=>!e.includes(r.id))};return s.currentWeek?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"}),r.jsx("div",{className:"flex-1 h-3 bg-gray-300 dark:bg-gray-600 rounded"}),r.jsx("div",{className:"w-16 h-3 bg-gray-300 dark:bg-gray-600 rounded"})]},e))})]}):d?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(b,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Goals"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:d}),r.jsx("button",{onClick:()=>{i(),l()},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(b,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Weekly Goals"})]}),P().length>0&&r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-3 rounded-md transition-colors",children:[r.jsx(u,{className:"w-4 h-4"}),"Add Goal"]})]}),a&&r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Week of ",new Date(a.weekStart).toLocaleDateString()]}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.completedGoals," of ",a.totalGoals," goals completed"]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsx("span",{children:"Overall Progress"}),r.jsxs("span",{children:[Math.round(a.overallProgressPercentage),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${M(a.overallProgressPercentage)}`,style:{width:`${Math.min(100,a.overallProgressPercentage)}%`}})})]}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[D(a.totalCurrentMinutes)," of ",D(a.totalTargetMinutes)]})]}),a?.goals&&a.goals.length>0?r.jsx("div",{className:"space-y-4",children:a.goals.map(e=>r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.categoryColor}}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.categoryName}),e.isCompleted&&r.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs font-medium px-2 py-1 rounded-full",children:"Completed"})]}),r.jsx("div",{className:"flex items-center gap-2",children:x===e.categoryId?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",value:h,onChange:e=>p(e.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",placeholder:"Minutes"}),r.jsx("button",{onClick:()=>(async e=>{const r=parseInt(h);if(!(isNaN(r)||r<0))try{await n(e,r),m(null),p("")}catch(t){}})(e.categoryId),disabled:s.updateGoal,className:"p-1 text-green-600 hover:text-green-700 disabled:opacity-50",children:r.jsx(y,{className:"w-4 h-4"})}),r.jsx("button",{onClick:C,className:"p-1 text-gray-600 hover:text-gray-700",children:r.jsx(c,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{return r=e.categoryId,t=e.targetMinutes,m(r),void p(t.toString());var r,t},className:"p-1 text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:r.jsx(k,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>(async e=>{try{await n(e,0)}catch(r){}})(e.categoryId),className:"p-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:r.jsx(j,{className:"w-4 h-4"})})]})})]}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsxs("span",{children:[D(e.currentMinutes)," / ",D(e.targetMinutes)]}),r.jsxs("span",{children:[Math.round(e.progressPercentage),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${M(e.progressPercentage)}`,style:{width:`${Math.min(100,e.progressPercentage)}%`}})})]})]},e.categoryId))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Weekly Goals Set"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Set weekly time goals for your categories to track your progress."}),P().length>0&&r.jsx("button",{onClick:()=>N(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Set Your First Goal"})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add Weekly Goal"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),r.jsxs("select",{value:v||"",onChange:e=>w(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"",children:"Select a category"}),P().map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Minutes per Week"}),r.jsx("input",{type:"number",value:S,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",placeholder:"e.g., 120 (2 hours)"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{N(!1),w(null),$("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 font-medium",children:"Cancel"}),r.jsx("button",{onClick:async()=>{if(!v)return;const e=parseInt(S);if(!(isNaN(e)||e<0))try{await n(v,e),N(!1),w(null),$("")}catch(r){}},disabled:!v||!S||s.updateGoal,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-md transition-colors",children:s.updateGoal?"Adding...":"Add Goal"})]})]})})]})},X=({className:t="",showWeeklyTrend:a=!1})=>{const{currentWeekProgress:l,statistics:n,loading:i,error:o,fetchCurrentWeekProgress:c,fetchStatistics:g,clearError:x}=q();e.useEffect(()=>{c(),a&&g(8)},[c,g,a]);const m=e=>{const r=Math.floor(e/60),t=e%60;return r>0?`${r}h ${t}m`:`${t}m`},h=l?.goals.map(e=>({name:e.categoryName,current:e.currentMinutes,target:e.targetMinutes,percentage:e.progressPercentage,color:e.categoryColor,completed:e.isCompleted}))||[],b=n?.weeklyTrend.map(e=>({week:new Date(e.weekStart).toLocaleDateString("en-US",{month:"short",day:"numeric"}),completionRate:e.completionRate,totalMinutes:e.totalMinutes,goalsCompleted:e.goalsCompleted,totalGoals:e.totalGoals}))||[],u=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:a}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m(e.current)})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Target:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m(e.target)})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress:"}),r.jsxs("span",{className:"font-medium "+(e.completed?"text-green-600":"text-gray-900 dark:text-white"),children:[Math.round(e.percentage),"%"]})]})]})]})}return null},y=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",children:[r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:["Week of ",a]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completion Rate:"}),r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.completionRate),"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Time:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m(e.totalMinutes)})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Goals:"}),r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.goalsCompleted,"/",e.totalGoals]})]})]})]})}return null};return i.currentWeek||a&&i.statistics?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-64 bg-gray-300 dark:bg-gray-600 rounded"})]}):o?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(p,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Chart"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:o}),r.jsx("button",{onClick:()=>{x(),c(),a&&g(8)},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(p,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Current Week Progress"})]}),h.length>0?r.jsxs(r.Fragment,{children:[l&&r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.completedGoals}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Goals Completed"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.round(l.overallProgressPercentage),"%"]}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Overall Progress"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m(l.totalCurrentMinutes)}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Time Logged"})]})]}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(M,{data:h,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"name",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:e=>`${Math.round(e/60)}h`}),r.jsx(F,{content:r.jsx(u,{})}),r.jsx(G,{dataKey:"current",radius:[4,4,0,0],children:h.map((e,t)=>{return r.jsx(I,{fill:(a=e.percentage,a>=100?"#10b981":a>=75?"#3b82f6":a>=50?"#f59e0b":"#6b7280")},`cell-${t}`);var a})}),r.jsx(G,{dataKey:"target",fill:"#e5e7eb",opacity:.3,radius:[4,4,0,0]})]})})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Goals This Week"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Set some weekly goals to see your progress here."})]})]}),a&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(d,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Weekly Trend"})]}),b.length>0?r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(M,{data:b,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"week",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:e=>`${e}%`}),r.jsx(F,{content:r.jsx(y,{})}),r.jsx(G,{dataKey:"completionRate",fill:"#3b82f6",radius:[4,4,0,0]})]})})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Trend Data"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Complete some weekly goals to see trends over time."})]})]})]})},Z=({className:t="",showCelebration:a=!0})=>{const{achievements:s,loading:d,error:n,fetchAchievements:i,celebrateAchievement:o,clearError:c}=q(),[g,x]=e.useState({isOpen:!1,message:""}),[m,b]=e.useState(()=>{const e=new Date,r=new Date;return r.setDate(r.getDate()-30),{start:r.toISOString().split("T")[0],end:e.toISOString().split("T")[0]}});e.useEffect(()=>{i(m.start,m.end)},[i,m]);const u=e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),y=e=>{const r=Math.floor(e/60),t=e%60;return r>0?`${r}h ${t}m`:`${t}m`},k=e=>e>=50?r.jsx(h,{className:"w-5 h-5 text-yellow-500"}):e>=25?r.jsx(l,{className:"w-5 h-5 text-blue-500"}):r.jsx(l,{className:"w-5 h-5 text-green-500"});return d.achievements?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3 mb-1"}),r.jsx("div",{className:"h-2 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]})]},e))})]}):n?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(l,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Achievements"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:n}),r.jsx("button",{onClick:()=>{c(),i(m.start,m.end)},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Goal Achievements"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:m.start,onChange:e=>b(r=>({...r,start:e.target.value})),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsx("span",{className:"text-gray-500 text-xs",children:"to"}),r.jsx("input",{type:"date",value:m.end,onChange:e=>b(r=>({...r,end:e.target.value})),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.length>0?r.jsx("div",{className:"space-y-4",children:s.map((e,t)=>{const s=(l=e.overachievementPercentage)>=50?{text:"Superstar",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"}:l>=25?{text:"Overachiever",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}:{text:"Goal Achieved",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"};var l;return r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:k(e.overachievementPercentage)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.categoryName}),r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${s.color}`,children:s.text})]}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Week of ",u(new Date(e.weekStart))]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Target: "}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:y(e.targetMinutes)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Achieved: "}),r.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:y(e.actualMinutes)})]}),e.overachievementPercentage>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bonus: "}),r.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["+",Math.round(e.overachievementPercentage),"%"]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:u(e.achievedAt)}),a&&r.jsx("button",{onClick:()=>(async(e,r)=>{try{const t=await o(e,r);a&&x({isOpen:!0,message:t.message,milestone:t.milestone})}catch(t){}})(e.categoryId,e.weekStart),disabled:d.celebration,className:"p-1 text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 disabled:opacity-50",title:"Celebrate this achievement",children:r.jsx(f,{className:"w-4 h-4"})})]})]})},`${e.categoryId}-${e.weekStart}-${t}`)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Achievements Yet"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Complete your weekly goals to earn achievements and celebrate your progress!"})]}),g.isOpen&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 text-center",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"p-4 bg-yellow-100 dark:bg-yellow-900/30 rounded-full w-fit mx-auto mb-4 animate-bounce",children:r.jsx(l,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"ðŸŽ‰ Congratulations! ðŸŽ‰"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.message}),g.milestone&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg mb-4",children:r.jsxs("p",{className:"text-blue-700 dark:text-blue-300 font-medium",children:["ðŸ† Milestone: ",g.milestone]})})]}),r.jsx("button",{onClick:()=>x({isOpen:!1,message:""}),className:"bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-6 rounded-md transition-colors",children:"Awesome!"})]})})]})},V=({className:t=""})=>{const{goalsNeedingAttention:a,loading:s,error:l,fetchGoalsNeedingAttention:n,clearError:i}=q();e.useEffect(()=>{n()},[n]);const o=e=>{const r=Math.floor(e/60),t=e%60;return r>0?`${r}h ${t}m`:`${t}m`},c=e=>{switch(e){case"high":return r.jsx(g,{className:"w-5 h-5"});case"medium":return r.jsx(d,{className:"w-5 h-5"});case"low":return r.jsx(N,{className:"w-5 h-5"})}};return s.attention?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2].map(e=>r.jsxs("div",{className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-5 h-5 bg-gray-300 dark:bg-gray-600 rounded"}),r.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3"})]}),r.jsx("div",{className:"h-2 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]},e))})]}):l?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(g,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Goals"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:l}),r.jsx("button",{onClick:()=>{i(),n()},className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(g,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Goals Needing Attention"}),a.length>0&&r.jsx("span",{className:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 text-xs font-medium px-2 py-1 rounded-full",children:a.length})]}),a.length>0?r.jsx("div",{className:"space-y-4",children:a.map(e=>{const t=(e=>{switch(e){case"high":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-700 dark:text-red-300",badge:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",icon:"text-red-500"};case"medium":return{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300",badge:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",icon:"text-yellow-500"};case"low":return{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300",badge:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",icon:"text-blue-500"}}})(e.riskLevel),a=e.currentMinutes/e.targetMinutes*100;return r.jsxs("div",{className:`p-4 rounded-lg border ${t.bg} ${t.border}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.categoryColor}}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.categoryName}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${t.badge}`,children:[e.riskLevel.toUpperCase()," RISK"]}),r.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.daysLeft," ",1===e.daysLeft?"day":"days"," left"]})]})]})]}),r.jsx("div",{className:`${t.icon}`,children:c(e.riskLevel)})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsxs("span",{children:[o(e.currentMinutes)," / ",o(e.targetMinutes)]}),r.jsxs("span",{children:[Math.round(a),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+("high"===e.riskLevel?"bg-red-500":"medium"===e.riskLevel?"bg-yellow-500":"bg-blue-500"),style:{width:`${Math.min(100,a)}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining: "}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o(e.remainingMinutes)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Daily target: "}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o(e.dailyTargetToMeetGoal)})]})]}),r.jsx("div",{className:`p-3 rounded-lg ${t.bg} border ${t.border}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(b,{className:`w-4 h-4 mt-0.5 ${t.icon}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${t.text} mb-1`,children:"Recommendation:"}),r.jsx("p",{className:`text-sm ${t.text}`,children:e.suggestion})]})]})})]},e.categoryId)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"p-4 bg-green-100 dark:bg-green-900/30 rounded-full w-fit mx-auto mb-4",children:r.jsx(b,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"All Goals on Track! ðŸŽ¯"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Great job! All your weekly goals are progressing well. Keep up the excellent work!"})]})]})},_=({className:t="",showTrend:a=!0,showDetails:s=!0})=>{const[d,l]=e.useState(null),[n,i]=e.useState(!0),[o,c]=e.useState(null);e.useEffect(()=>{g()},[]);const g=async()=>{i(!0),c(null);try{const e=await fetch("/api/focus-score/current");if(!e.ok)throw new Error("Failed to fetch focus score");const r=await e.json();l(r)}catch(e){c(e instanceof Error?e.message:"Unknown error")}finally{i(!1)}},x=e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-blue-600 dark:text-blue-400":e>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",m=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:new Date(a).toLocaleDateString()}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Focus Score:"}),r.jsx("span",{className:`font-medium ${x(e.score)}`,children:e.score})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Focus Time:"}),r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.totalTime/60),"h ",e.totalTime%60,"m"]})]})]})]})}return null};if(n)return r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),a&&r.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-600 rounded"})]});if(o)return r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(v,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Focus Score"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:o}),r.jsx("button",{onClick:g,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]});if(!d)return r.jsx("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Focus Data"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Complete some focus sessions to see your score."})]})});const h=((e,r)=>{const t=e-r,a=t>0;return 0===t?{text:"No change",color:"text-gray-500",icon:"â†’"}:{text:`${a?"+":""}${t.toFixed(1)} points`,color:a?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",icon:a?"â†—":"â†˜"}})(d.currentScore,d.previousScore);return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(v,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Focus Score"})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"p-6 rounded-lg "+(b=d.currentScore,b>=80?"bg-green-100 dark:bg-green-900/30":b>=60?"bg-blue-100 dark:bg-blue-900/30":b>=40?"bg-yellow-100 dark:bg-yellow-900/30":"bg-red-100 dark:bg-red-900/30"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-4xl font-bold ${x(d.currentScore)}`,children:d.currentScore}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(e=>e>=80?"Excellent":e>=60?"Good":e>=40?"Fair":"Needs Improvement")(d.currentScore)})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`flex items-center gap-1 text-sm ${h.color}`,children:[r.jsx("span",{children:h.icon}),r.jsx("span",{children:h.text})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"vs. previous period"})]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mt-4",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(d.currentScore>=80?"bg-green-500":d.currentScore>=60?"bg-blue-500":d.currentScore>=40?"bg-yellow-500":"bg-red-500"),style:{width:`${d.currentScore}%`}})})]})}),s&&d.breakdown&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Score Breakdown"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.breakdown.timeScore}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Time Score"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.breakdown.qualityScore}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Quality Score"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.breakdown.consistencyScore}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Consistency"})]})]})]}),a&&d.trend.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(p,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"7-Day Trend"})]}),r.jsx("div",{className:"h-32",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(W,{data:d.trend,children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"date",stroke:"#6b7280",fontSize:10,tick:{fill:"#6b7280"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),r.jsx(A,{stroke:"#6b7280",fontSize:10,tick:{fill:"#6b7280"},domain:[0,100]}),r.jsx(F,{content:r.jsx(m,{})}),r.jsx(L,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:3},activeDot:{r:5,stroke:"#3b82f6",strokeWidth:2}})]})})})]}),s&&d.insights.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(w,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Insights & Recommendations"})]}),r.jsx("div",{className:"space-y-2",children:d.insights.map((e,t)=>r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsxs("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["ðŸ’¡ ",e]})},t))})]})]});var b},ee=({className:t="",showProgress:a=!0,filterCategory:d,maxDisplay:i})=>{const[o,c]=e.useState([]),[g,x]=e.useState(!0),[u,y]=e.useState(null);e.useEffect(()=>{k()},[]);const k=async()=>{x(!0),y(null);try{const e=await fetch("/api/focus-score/achievements");if(!e.ok)throw new Error("Failed to fetch achievements");const r=await e.json();c(r.achievements||[])}catch(e){y(e instanceof Error?e.message:"Unknown error"),c(j())}finally{x(!1)}},j=()=>[{id:"first-session",title:"First Steps",description:"Complete your first focus session",icon:"zap",category:"milestone",tier:"bronze",unlockedAt:new Date("2024-01-15")},{id:"streak-3",title:"Getting Started",description:"Maintain a 3-day focus streak",icon:"flame",category:"streak",tier:"bronze",progress:{current:0,target:3}},{id:"streak-7",title:"Week Warrior",description:"Maintain a 7-day focus streak",icon:"flame",category:"streak",tier:"silver",progress:{current:0,target:7}},{id:"streak-30",title:"Month Master",description:"Maintain a 30-day focus streak",icon:"crown",category:"streak",tier:"gold",progress:{current:0,target:30}},{id:"time-10h",title:"Focused Ten",description:"Complete 10 hours of focused work",icon:"target",category:"time",tier:"bronze",progress:{current:.38,target:10}},{id:"time-100h",title:"Century Club",description:"Complete 100 hours of focused work",icon:"medal",category:"time",tier:"silver",progress:{current:.38,target:100}},{id:"consistency-week",title:"Consistent Creator",description:"Complete sessions 5 days in a row",icon:"calendar",category:"consistency",tier:"silver",progress:{current:1,target:5}},{id:"perfect-score",title:"Perfect Focus",description:"Achieve a perfect focus score of 100",icon:"star",category:"special",tier:"platinum",progress:{current:0,target:100}}],p=e=>{if(!e)return"";const r=Math.min(100,e.current/e.target*100);return`${e.current}/${e.target} (${Math.round(r)}%)`};let f=o;return d&&(f=o.filter(e=>e.category===d)),i&&(f=f.slice(0,i)),f.sort((e,r)=>{const t=!!e.unlockedAt,a=!!r.unlockedAt;if(t!==a)return a?1:-1;const s={bronze:1,silver:2,gold:3,platinum:4},d=s[e.tier]-s[r.tier];if(0!==d)return d;if(!t&&!a&&e.progress&&r.progress){const t=e.progress.current/e.progress.target;return r.progress.current/r.progress.target-t}return 0}),g?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-4"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsx("div",{className:"h-24 bg-gray-300 dark:bg-gray-600 rounded-lg"},e))})]}):u&&0===o.length?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(l,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Achievements"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:u}),r.jsx("button",{onClick:k,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(l,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Achievement Badges"}),r.jsxs("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 text-xs font-medium px-2 py-1 rounded-full",children:[o.filter(e=>e.unlockedAt).length,"/",o.length]})]}),f.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:f.map(e=>{const t=!!e.unlockedAt,d=((e,r)=>({bronze:{bg:r?"bg-orange-100 dark:bg-orange-900/30":"bg-gray-100 dark:bg-gray-800",border:r?"border-orange-300 dark:border-orange-700":"border-gray-300 dark:border-gray-600",icon:r?"text-orange-600 dark:text-orange-400":"text-gray-400",text:r?"text-orange-800 dark:text-orange-200":"text-gray-500 dark:text-gray-400"},silver:{bg:r?"bg-gray-100 dark:bg-gray-700":"bg-gray-100 dark:bg-gray-800",border:r?"border-gray-400 dark:border-gray-500":"border-gray-300 dark:border-gray-600",icon:r?"text-gray-600 dark:text-gray-300":"text-gray-400",text:r?"text-gray-800 dark:text-gray-200":"text-gray-500 dark:text-gray-400"},gold:{bg:r?"bg-yellow-100 dark:bg-yellow-900/30":"bg-gray-100 dark:bg-gray-800",border:r?"border-yellow-300 dark:border-yellow-700":"border-gray-300 dark:border-gray-600",icon:r?"text-yellow-600 dark:text-yellow-400":"text-gray-400",text:r?"text-yellow-800 dark:text-yellow-200":"text-gray-500 dark:text-gray-400"},platinum:{bg:r?"bg-purple-100 dark:bg-purple-900/30":"bg-gray-100 dark:bg-gray-800",border:r?"border-purple-300 dark:border-purple-700":"border-gray-300 dark:border-gray-600",icon:r?"text-purple-600 dark:text-purple-400":"text-gray-400",text:r?"text-purple-800 dark:text-purple-200":"text-gray-500 dark:text-gray-400"}}[e]))(e.tier,t),i=(o=e.icon,{trophy:l,star:h,medal:$,crown:S,zap:m,target:b,calendar:s,flame:n}[o]||l);var o;const c=(g=e.category,{streak:n,time:b,consistency:s,milestone:h,special:S}[g]);var g;return r.jsxs("div",{className:`relative p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 ${d.bg} ${d.border} ${t?"shadow-md hover:shadow-lg":"opacity-75"}`,children:[r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx(c,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"})}),r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx("div",{className:`p-3 rounded-full ${d.bg} ${d.border} border`,children:r.jsx(i,{className:`w-6 h-6 ${d.icon}`})})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h4",{className:`font-medium text-sm mb-1 ${d.text}`,children:e.title}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:e.description}),r.jsx("div",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${d.bg} ${d.text} border ${d.border}`,children:e.tier.charAt(0).toUpperCase()+e.tier.slice(1)}),t&&e.unlockedAt?r.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Unlocked ",e.unlockedAt.toLocaleDateString()]}):a&&e.progress?r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:p(e.progress)}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1",children:r.jsx("div",{className:"h-1 rounded-full transition-all duration-500 "+("bronze"===e.tier?"bg-orange-500":"silver"===e.tier?"bg-gray-500":"gold"===e.tier?"bg-yellow-500":"bg-purple-500"),style:{width:`${Math.min(100,e.progress.current/e.progress.target*100)}%`}})})]}):null]}),t&&r.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})]},e.id)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Achievements Yet"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Start completing focus sessions to unlock achievement badges!"})]})]})},re=({className:t="",timeRange:a="month"})=>{const[s,d]=e.useState(null),[l,n]=e.useState(!0),[i,o]=e.useState(null),[c,g]=e.useState("overview");e.useEffect(()=>{x()},[a]);const x=async()=>{n(!0),o(null);try{const e=await fetch(`/api/focus-score/statistics?range=${a}`);if(!e.ok)throw new Error("Failed to fetch statistics");const r=await e.json();d(r)}catch(e){o(e instanceof Error?e.message:"Unknown error"),d(m())}finally{n(!1)}},m=()=>({overview:{totalSessions:23,totalFocusTime:1380,averageSessionLength:60,longestStreak:5,currentStreak:0,focusScore:72},trends:{daily:[{date:"2025-09-12",sessions:3,focusTime:180,score:75},{date:"2025-09-13",sessions:2,focusTime:120,score:68},{date:"2025-09-14",sessions:4,focusTime:240,score:82},{date:"2025-09-15",sessions:1,focusTime:60,score:65},{date:"2025-09-16",sessions:3,focusTime:180,score:78},{date:"2025-09-17",sessions:2,focusTime:120,score:70},{date:"2025-09-18",sessions:0,focusTime:0,score:0}],weekly:[{week:"Week 1",sessions:15,focusTime:900,score:74},{week:"Week 2",sessions:18,focusTime:1080,score:78},{week:"Week 3",sessions:12,focusTime:720,score:69},{week:"Week 4",sessions:8,focusTime:480,score:65}]},patterns:{hourly:[{hour:6,sessions:2,avgScore:85},{hour:7,sessions:4,avgScore:82},{hour:8,sessions:6,avgScore:78},{hour:9,sessions:8,avgScore:75},{hour:10,sessions:5,avgScore:73},{hour:14,sessions:3,avgScore:70},{hour:15,sessions:4,avgScore:68},{hour:16,sessions:2,avgScore:65},{hour:20,sessions:3,avgScore:72},{hour:21,sessions:2,avgScore:70}],weekday:[{day:"Mon",sessions:8,avgScore:76},{day:"Tue",sessions:6,avgScore:74},{day:"Wed",sessions:7,avgScore:78},{day:"Thu",sessions:5,avgScore:72},{day:"Fri",sessions:4,avgScore:69},{day:"Sat",sessions:2,avgScore:65},{day:"Sun",sessions:3,avgScore:68}]},categories:[{name:"Work & Business",focusTime:600,sessions:10,color:"#3b82f6"},{name:"Learning",focusTime:360,sessions:6,color:"#10b981"},{name:"Creative",focusTime:240,sessions:4,color:"#f59e0b"},{name:"Personal",focusTime:180,sessions:3,color:"#ef4444"}]}),h=e=>{const r=Math.floor(e/60),t=e%60;return r>0?`${r}h ${t}m`:`${t}m`},b=e=>0===e?"12 AM":e<12?`${e} AM`:12===e?"12 PM":e-12+" PM",u=({active:e,payload:t,label:a})=>e&&t&&t.length?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:a}),t.map((e,t)=>r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{style:{color:e.color},children:[e.name,": "]}),r.jsx("span",{className:"font-medium",children:"focusTime"===e.dataKey?h(e.value):e.value})]},t))]}):null;return l?r.jsxs("div",{className:`animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-6"}),r.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(e=>r.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded"},e))}),r.jsx("div",{className:"h-64 bg-gray-300 dark:bg-gray-600 rounded"})]}):i?r.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[r.jsx(C,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Error Loading Statistics"})]}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-3",children:i}),r.jsx("button",{onClick:x,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium",children:"Try Again"})]}):s?r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Habit Statistics"})]}),r.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["overview","trends","patterns"].map(e=>r.jsx("button",{onClick:()=>g(e),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors "+(c===e?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),"overview"===c&&s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.overview?.totalSessions||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Sessions"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:h(s.overview?.totalFocusTime||0)}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Focus Time"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s.overview?.longestStreak||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Longest Streak"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.overview?.focusScore||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Focus Score"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Focus Time by Category"}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(U,{children:[r.jsx(O,{data:s.categories||[],cx:"50%",cy:"50%",outerRadius:80,dataKey:"focusTime",label:({name:e,percent:r})=>`${e} ${(100*r).toFixed(0)}%`,children:(s.categories||[]).map((e,t)=>r.jsx(I,{fill:e.color},`cell-${t}`))}),r.jsx(F,{formatter:e=>h(e)})]})})})]})]}),"trends"===c&&s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Daily Focus Time (Last 7 Days)"}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(W,{data:s.trends?.daily||[],children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"date",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:e=>`${Math.round(e/60)}h`}),r.jsx(F,{content:r.jsx(u,{})}),r.jsx(L,{type:"monotone",dataKey:"focusTime",stroke:"#3b82f6",strokeWidth:2,name:"Focus Time"})]})})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Weekly Sessions"}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(M,{data:s.trends?.weekly||[],children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"week",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(F,{content:r.jsx(u,{})}),r.jsx(G,{dataKey:"sessions",fill:"#10b981",name:"Sessions"})]})})})]})]}),"patterns"===c&&s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Focus Sessions by Hour"}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(M,{data:s.patterns?.hourly||[],children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"hour",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:b}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(F,{labelFormatter:b,content:r.jsx(u,{})}),r.jsx(G,{dataKey:"sessions",fill:"#f59e0b",name:"Sessions"})]})})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Focus Sessions by Day of Week"}),r.jsx("div",{className:"h-64",children:r.jsx(D,{width:"100%",height:"100%",children:r.jsxs(M,{data:s.patterns?.weekday||[],children:[r.jsx(P,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(E,{dataKey:"day",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(A,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),r.jsx(F,{content:r.jsx(u,{})}),r.jsx(G,{dataKey:"sessions",fill:"#8b5cf6",name:"Sessions"})]})})})]})]})]}):r.jsx("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-6 ${t}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Statistics Available"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Complete some focus sessions to see your statistics."})]})})},te=()=>{const[t,a]=e.useState(!1);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Habit Tracking"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your focus streaks and build consistent habits"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(K,{}),r.jsx(H,{})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsx(Q,{}),r.jsx(X,{})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsx(V,{}),r.jsx(Z,{})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsx(_,{}),r.jsx(ee,{})]}),r.jsx(re,{}),r.jsx(Y,{}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Grace Period Recovery"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Test the grace period dialog functionality (for development purposes)."}),r.jsx("button",{onClick:()=>a(!0),className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Test Grace Period Dialog"})]}),r.jsx(B,{isOpen:t,onClose:()=>a(!1),onRecovered:()=>{a(!1)}})]})};export{te as default};
//# sourceMappingURL=Habits-DukPGCrA.js.map
