import{R as t}from"./vendor-react-Gj0PPTzM.js";import{ao as e}from"./vendor-misc-CPs7ArQ_.js";const n=t=>{let e;const n=new Set,r=(t,r)=>{const o="function"==typeof t?t(e):t;if(!Object.is(o,e)){const t=e;e=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},e,o),n.forEach(n=>n(e,t))}},o=()=>e,i={setState:r,getState:o,getInitialState:()=>s,subscribe:t=>(n.add(t),()=>n.delete(t)),destroy:()=>{n.clear()}},s=e=t(r,o,i);return i},r={},{useDebugValue:o}=t,{useSyncExternalStoreWithSelector:i}=e;let s=!1;const a=t=>t;const c=t=>{const e="function"==typeof t?(t=>t?n(t):n)(t):t,c=(t,n)=>function(t,e=a,n){"production"!==(r?"production":void 0)&&n&&!s&&(s=!0);const c=i(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return o(c),c}(e,t,n);return Object.assign(c,e),c},l=t=>t?c(t):c,u={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},d=new Map,v=t=>{const e=d.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([t,e])=>[t,e.getState()])):{}},S=(t,e={})=>(n,r,o)=>{const{enabled:i,anonymousActionType:s,store:a,...c}=e;let l;try{l=(null!=i?i:"production"!==(u?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(h){}if(!l)return t(n,r,o);const{connection:S,...p}=((t,e,n)=>{if(void 0===t)return{type:"untracked",connection:e.connect(n)};const r=d.get(n.name);if(r)return{type:"tracked",store:t,...r};const o={connection:e.connect(n),stores:{}};return d.set(n.name,o),{type:"tracked",store:t,...o}})(a,l,c);let f=!0;o.setState=(t,e,i)=>{const l=n(t,e);if(!f)return l;const u=void 0===i?{type:s||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===a?(null==S||S.send(u,r()),l):(null==S||S.send({...u,type:`${a}/${u.type}`},{...v(c.name),[a]:o.getState()}),l)};const m=(...t)=>{const e=f;f=!1,n(...t),f=e},y=t(o.setState,r,o);if("untracked"===p.type?null==S||S.init(y):(p.stores[p.store]=o,null==S||S.init(Object.fromEntries(Object.entries(p.stores).map(([t,e])=>[t,t===p.store?y:e.getState()])))),o.dispatchFromDevtools&&"function"==typeof o.dispatch){let t=!1;const e=o.dispatch;o.dispatch=(...n)=>{"production"===(u?"production":void 0)||"__setState"!==n[0].type||t||(t=!0),e(...n)}}return S.subscribe(t=>{var e;switch(t.type){case"ACTION":if("string"!=typeof t.payload)return;return g(t.payload,t=>{if("__setState"===t.type){if(void 0===a)return void m(t.state);Object.keys(t.state).length;const e=t.state[a];if(null==e)return;return void(JSON.stringify(o.getState())!==JSON.stringify(e)&&m(e))}o.dispatchFromDevtools&&"function"==typeof o.dispatch&&o.dispatch(t)});case"DISPATCH":switch(t.payload.type){case"RESET":return m(y),void 0===a?null==S?void 0:S.init(o.getState()):null==S?void 0:S.init(v(c.name));case"COMMIT":return void 0===a?void(null==S||S.init(o.getState())):null==S?void 0:S.init(v(c.name));case"ROLLBACK":return g(t.state,t=>{if(void 0===a)return m(t),void(null==S||S.init(o.getState()));m(t[a]),null==S||S.init(v(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return g(t.state,t=>{void 0!==a?JSON.stringify(o.getState())!==JSON.stringify(t[a])&&m(t[a]):m(t)});case"IMPORT_STATE":{const{nextLiftedState:n}=t.payload,r=null==(e=n.computedStates.slice(-1)[0])?void 0:e.state;if(!r)return;return m(void 0===a?r:r[a]),void(null==S||S.send(null,n))}case"PAUSE_RECORDING":return f=!f}return}}),y},g=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){}void 0!==n&&e(n)},p=t=>(e,n,r)=>{const o=r.subscribe;r.subscribe=(t,e,n)=>{let i=t;if(e){const o=(null==n?void 0:n.equalityFn)||Object.is;let s=t(r.getState());i=n=>{const r=t(n);if(!o(s,r)){const t=s;e(s=r,t)}},(null==n?void 0:n.fireImmediately)&&e(s,s)}return o(i)};return t(e,n,r)};function f(t,e){let n;try{n=t()}catch(r){return}return{getItem:t=>{var e;const r=t=>null===t?null:JSON.parse(t,void 0),o=null!=(e=n.getItem(t))?e:null;return o instanceof Promise?o.then(r):r(o)},setItem:(t,e)=>n.setItem(t,JSON.stringify(e,void 0)),removeItem:t=>n.removeItem(t)}}const m=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then:t=>m(t)(n),catch(t){return this}}}catch(n){return{then(t){return this},catch:t=>m(t)(n)}}},y=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((t,e)=>(n,r,o)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:t=>t,version:0,merge:(t,e)=>({...e,...t}),...e},s=!1;const a=new Set,c=new Set;let l;try{l=i.getStorage()}catch(f){}if(!l)return t((...t)=>{n(...t)},r,o);const u=m(i.serialize),d=()=>{const t=i.partialize({...r()});let e;const n=u({state:t,version:i.version}).then(t=>l.setItem(i.name,t)).catch(t=>{e=t});if(e)throw e;return n},v=o.setState;o.setState=(t,e)=>{v(t,e),d()};const S=t((...t)=>{n(...t),d()},r,o);let g;const p=()=>{var t;if(!l)return;s=!1,a.forEach(t=>t(r()));const e=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,r()))||void 0;return m(l.getItem.bind(l))(i.name).then(t=>{if(t)return i.deserialize(t)}).then(t=>{if(t){if("number"!=typeof t.version||t.version===i.version)return t.state;if(i.migrate)return i.migrate(t.state,t.version)}}).then(t=>{var e;return g=i.merge(t,null!=(e=r())?e:S),n(g,!0),d()}).then(()=>{null==e||e(g,void 0),s=!0,c.forEach(t=>t(g))}).catch(t=>{null==e||e(void 0,t)})};return o.persist={setOptions:t=>{i={...i,...t},t.getStorage&&(l=t.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:t=>(a.add(t),()=>{a.delete(t)}),onFinishHydration:t=>(c.add(t),()=>{c.delete(t)})},p(),g||S})(t,e):((t,e)=>(n,r,o)=>{let i={storage:f(()=>localStorage),partialize:t=>t,version:0,merge:(t,e)=>({...e,...t}),...e},s=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...t)=>{n(...t)},r,o);const u=()=>{const t=i.partialize({...r()});return l.setItem(i.name,{state:t,version:i.version})},d=o.setState;o.setState=(t,e)=>{d(t,e),u()};const v=t((...t)=>{n(...t),u()},r,o);let S;o.getInitialState=()=>v;const g=()=>{var t,e;if(!l)return;s=!1,a.forEach(t=>{var e;return t(null!=(e=r())?e:v)});const o=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,null!=(t=r())?t:v))||void 0;return m(l.getItem.bind(l))(i.name).then(t=>{if(t){if("number"!=typeof t.version||t.version===i.version)return[!1,t.state];if(i.migrate)return[!0,i.migrate(t.state,t.version)]}return[!1,void 0]}).then(t=>{var e;const[o,s]=t;if(S=i.merge(s,null!=(e=r())?e:v),n(S,!0),o)return u()}).then(()=>{null==o||o(S,void 0),S=r(),s=!0,c.forEach(t=>t(S))}).catch(t=>{null==o||o(void 0,t)})};return o.persist={setOptions:t=>{i={...i,...t},t.storage&&(l=t.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:t=>(a.add(t),()=>{a.delete(t)}),onFinishHydration:t=>(c.add(t),()=>{c.delete(t)})},i.skipHydration||g(),S||v})(t,e);export{l as c,S as d,y as p,p as s};
//# sourceMappingURL=vendor-state-Jewp0_hO.js.map
